System.register("chunks:///_virtual/Alert.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var n,i,e,o,s,l,a;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.utils,s=t.Label,l=t.Component},function(t){a=t.AppGlobal}],execute:function(){var c;i._RF.push({},"c12553sxCxG/on0Bz7rkX0f","Alert",void 0);var r=e.ccclass;t("Alert",r("Alert")(c=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._alert=void 0,n._btnOK=void 0,n._btnCancel=void 0,n._title=void 0,n._content=void 0,n._onok=void 0,n}n(i,t);var e=i.prototype;return e.onLoad=function(){this._alert=o.find("alert",this.node),this._title=o.find("alert/title",this.node).getComponent(s),this._content=o.find("alert/content",this.node).getComponent(s),this._btnOK=o.find("alert/btn_ok",this.node),this._btnCancel=o.find("alert/btn_cancel",this.node),a.vv().utils.addClickEvent(this._btnOK,this.node,"Alert","onBtnClicked"),a.vv().utils.addClickEvent(this._btnCancel,this.node,"Alert","onBtnClicked"),this._alert.active=!1,a.vv().alert=this},e.onBtnClicked=function(t){"btn_ok"==t.target.name&&this._onok&&this._onok(),this._alert.active=!1,this._onok=null},e.show=function(t,n,i,e){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===e&&(e=!1),this._alert.active=!0,this._onok=i,this._title.string=t,this._content.string=n,e){this._btnCancel.active=!0;var o=this._btnOK.getPosition(),s=this._btnCancel.getPosition();this._btnOK.setPosition(-150,o.y),this._btnCancel.setPosition(150,s.y)}else{this._btnCancel.active=!1;var l=this._btnOK.getPosition();this._btnOK.setPosition(0,l.y)}},e.onDestory=function(){a.vv().alert=null},i}(l))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/AnysdkMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var e,i,n,o,r,s,l,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.sys,r=t.director,s=t.RenderTexture,l=t.Component},function(t){a=t.AppGlobal}],execute:function(){var c;i._RF.push({},"f58cea6lrpDZJSNs2BGBqxN","AnysdkMgr",void 0);var h=n.ccclass;t("AnysdkMgr",h("AnysdkMgr")(c=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._isCapturing=!1,e.ANDROID_API=void 0,e.IOS_API=void 0,e}e(i,t);var n=i.prototype;return n.onLoad=function(){console.log("on load AnysdkMgr")},n.init=function(){this.ANDROID_API="com/babykylin/NativeAPI",this.IOS_API="AppController"},n.getBatteryPercent=function(){if(o.isNative){if(o.os==o.OS_ANDROID)return jsb.reflection.callStaticMethod(this.ANDROID_API,"getBatteryPercent","()F");if(o.os==o.OS_IOS)return jsb.reflection.callStaticMethod(this.IOS_API,"getBatteryPercent","")}return.9},n.login=function(){o.os==o.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"Login","()V"):o.os==o.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"login",""):console.log("platform:"+o.os+" dosn't implement share.")},n.share=function(t,e){o.os==o.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",a.vv().SI.appweb,t,e):o.os==o.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"share:shareTitle:shareDesc:",a.vv().SI.appweb,t,e):console.log("platform:"+o.os+" dosn't implement share.")},n.shareResult=function(){if(!this._isCapturing){this._isCapturing=!0;var t=r.getWinSize(),e=jsb.fileUtils.getWritablePath()+"result_share.jpg";jsb.fileUtils.isFileExist(e)&&jsb.fileUtils.removeFile(e),(new s).resize(Math.floor(t.width),Math.floor(t.height))}},n.onLoginResp=function(t){},i}(l))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/AppGlobal.ts",["cc","./UserMgr.ts","./ReplayMgr.ts","./HTTP.ts","./Net.ts","./GameNetMgr.ts","./VoiceMgr.ts","./AudioMgr.ts","./Utils.ts","./WaitingConnection.ts","./Alert.ts"],(function(n){var t,e,o,i,l,r,u,c,s,g,a;return{setters:[function(n){t=n.cclegacy},function(n){e=n.UserMgr},function(n){o=n.ReplayMgr},function(n){i=n.HTTP},function(n){l=n.Net},function(n){r=n.GameNetMgr},function(n){u=n.VoiceMgr},function(n){c=n.AudioMgr},function(n){s=n.Utils},function(n){g=n.WaitingConnection},function(n){a=n.Alert}],execute:function(){t._RF.push({},"c044fej1ERKbpoxts9QioR+","AppGlobal",void 0),console.log("************************888*******"),window.VModel={alert:new a,userMgr:new e,replayMgr:new o,gameNetMgr:new r,voiceMgr:new u,audioMgr:new c,utils:new s,VERSION:"20161227",SI:null,http:new i,wc:new g,chat:null,mahjongmgr:null,net:new l("localhost: 9000"),images:{},baseInfoMap:null,userinfoShow:null,popupMgr:null,radiogroupmgr:null},console.log("************************777********"),n("AppGlobal",(function(){})).vv=function(){return window.VModel},t._RF.pop()}}}));

System.register("chunks:///_virtual/AppStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HTTP.ts","./AppGlobal.ts"],(function(e){var n,t,o,i,r,s,l,a,c,u,p,v,f,g,d,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.sys,a=e.Canvas,c=e.resources,u=e.utils,p=e.Sprite,v=e.Component,f=e.UIOpacity,g=e.director},function(e){d=e.HTTP},function(e){h=e.AppGlobal}],execute:function(){var b,m,S,y;r._RF.push({},"b688bZYoFdJxKE2TtdmN5SB","AppStart",void 0);var w=s.ccclass,_=s.property;function T(){var e;console.log("initMgr called, "+h.vv().gameNetMgr),h.vv().gameNetMgr.initHandlers(),null==(e=h.vv().anysdkMgr)||e.init(),h.vv().voiceMgr.init(),h.vv().audioMgr.init();!function(){var e,n,t={};if(null==window.location)return t;for(var o=window.location.href,i=o.indexOf("?"),r=(o=o.substr(i+1)).split("&"),s=0;s<r.length;s++)(i=r[s].indexOf("="))>0&&(e=r[s].substring(0,i),n=r[s].substr(i+1),t[e]=n)}()}e("AppStart",w("AppStart")((S=n((m=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,o(n,"label",S,i(n)),o(n,"loadingProgess",y,i(n)),n._mainScene="",n._splash=null,n}t(n,e);var r=n.prototype;return r.onLoad=function(){var e=this;if(!l.isNative&&l.isMobile){var n=this.node.getComponent(a);n&&(n.alignCanvasWithScreen=!0)}T(),console.log("application start, initMgr() called"),this._mainScene="loading",this.showSplash((function(){c.load("resources/ver/cv.txt",(function(n,t){console.warn("TODO: the data needs to be adjusted: "+t),console.log("current core version:"+t),e.getServerInfo()}))}))},r.onBtnDownloadClicked=function(){console.warn("TODO: adjust this part later")},r.showSplash=function(e){var n,t=this;if(this._splash=u.find("splash",this.node),this._splash.active=!0,null!=(null==(n=this._splash.getComponent(p))?void 0:n.spriteFrame)){var o=Date.now();setTimeout((function n(){var i=Date.now()-o;if(i<3e3)setTimeout(n,33);else{var r=255*(1-(i-3e3)/500);r<0?(t._splash.getComponent(f).opacity=0,e()):(t._splash.getComponent(f).opacity=r,setTimeout(n,33))}}),33)}else e()},r.getServerInfo=function(){var e=this,n=null,t=!1,o=function(){e.loadingProgess.string="正在连接服务器",n=(new d).sendRequest("/get_serverinfo",null,(function(o){console.log(" get server info response: "+JSON.stringify(o)),n=null,t=!0,function(n){if(null==n.version)console.log("error.");else if(h.vv().SI=n,n.version!=h.vv().VERSION){var t=u.find("alert",e.node);console.log("the node: "+t),u.find("alert",e.node).active=!0}else g.loadScene(e._mainScene)}(o)}),null),setTimeout(i,5e3)},i=function(){t||(n?(n.abort(),e.loadingProgess.string="连接失败，即将重试",setTimeout((function(){o()}),5e3)):o())};i()},r.log=function(e){this.label.string+=e+"\n"},n}(v)).prototype,"label",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(m.prototype,"loadingProgess",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b);r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,i,t,u,n,r,s,l,a,c,p;return{setters:[function(o){e=o.applyDecoratedDescriptor,i=o.inheritsLoose,t=o.initializerDefineProperty,u=o.assertThisInitialized},function(o){n=o.cclegacy,r=o._decorator,s=o.Node,l=o.AudioClip,a=o.resources,c=o.sys,p=o.Component}],execute:function(){var f,m,d,h,g;n._RF.push({},"55caepcpvFK5r0Ax5f8jss4","AudioMgr",void 0);var S=r.ccclass,_=r.property;o("AudioMgr",S("AudioMgr")((d=e((m=function(o){function e(){var e;return e=o.call(this)||this,t(e,"bgmVolume",d,u(e)),t(e,"sfxVolume",h,u(e)),t(e,"bgmAudioID",g,u(e)),e._audioSource=void 0,e}i(e,o);var n=e.prototype;return n.init=function(){(new s).name="__audioMgr__"},n.getUrl=function(o){return"sounds/"+o},n.playBGM=function(o){var e=this.getUrl(o);console.log(e),this.bgmAudioID},n.playOneShot=function(o,e){var i=this;void 0===e&&(e=1),o instanceof l?this._audioSource.playOneShot(o,e):a.load(o,(function(o,t){o?console.log(o):i._audioSource.playOneShot(t,e)}))},n.play=function(o,e){var i=this;void 0===e&&(e=1),o instanceof l?(this._audioSource.clip=o,this._audioSource.play(),this._audioSource.volume=e):a.load(o,(function(o,t){o?console.log(o):(i._audioSource.clip=t,i._audioSource.play(),i._audioSource.volume=e)}))},n.stop=function(){this._audioSource.stop()},n.pause=function(){this._audioSource.pause()},n.resume=function(){this._audioSource.play()},n.playSFX=function(o){var e=this.getUrl(o);this.sfxVolume>0&&this.playOneShot(e,this.sfxVolume)},n.setSFXVolume=function(o){this.sfxVolume!=o&&(c.localStorage.setItem("sfxVolume",o),this.sfxVolume=o)},n.setBGMVolume=function(o,e){void 0===e&&(e=!1),this.bgmAudioID>=0&&(o>0?this.resume():this.pause()),(this.bgmVolume!=o||e)&&(c.localStorage.setItem("bgmVolume",o),this.bgmVolume=o,this._audioSource.volume=o)},n.pauseAll=function(){this.pause()},n.resumeAll=function(){this.resume()},e}(p)).prototype,"bgmVolume",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=e(m.prototype,"sfxVolume",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=e(m.prototype,"bgmAudioID",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),f=m))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/Chat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var i,n,o,e,a,c;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.EditBox,a=t.Component},function(t){c=t.AppGlobal}],execute:function(){var h;n._RF.push({},"58f27rxustNsYlRX3fryN8X","Chat",void 0);var s=o.ccclass;t("Chat",s("Chat")(h=function(t){function n(){for(var i,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(i=t.call.apply(t,[this].concat(o))||this)._chatRoot=void 0,i._tabQuick=void 0,i._tabEmoji=void 0,i._iptChat=void 0,i._quickChatInfo=void 0,i}i(n,t);var o=n.prototype;return o.onLoad=function(){c.vv().chat=this,this._chatRoot=this.node.getChildByName("chat"),this._chatRoot.active=!1,this._tabQuick=this._chatRoot.getChildByName("quickchatlist"),this._tabEmoji=this._chatRoot.getChildByName("emojis"),this._iptChat=this._chatRoot.getChildByName("iptChat").getComponent(e),this._quickChatInfo={},this._quickChatInfo.item0={index:0,content:"快点啊，都等到我花儿都谢谢了！",sound:"fix_msg_1.mp3"},this._quickChatInfo.item1={index:1,content:"怎么又断线了，网络怎么这么差啊！",sound:"fix_msg_2.mp3"},this._quickChatInfo.item2={index:2,content:"不要走，决战到天亮！",sound:"fix_msg_3.mp3"},this._quickChatInfo.item3={index:3,content:"你的牌打得也太好了！",sound:"fix_msg_4.mp3"},this._quickChatInfo.item4={index:4,content:"你是妹妹还是哥哥啊？",sound:"fix_msg_5.mp3"},this._quickChatInfo.item5={index:5,content:"和你合作真是太愉快了！",sound:"fix_msg_6.mp3"},this._quickChatInfo.item6={index:6,content:"大家好，很高兴见到各位！",sound:"fix_msg_7.mp3"},this._quickChatInfo.item7={index:7,content:"各位，真是不好意思，我得离开一会儿。",sound:"fix_msg_8.mp3"},this._quickChatInfo.item8={index:8,content:"不要吵了，专心玩游戏吧！",sound:"fix_msg_9.mp3"}},o.getQuickChatInfo=function(t){var i="item"+t;return this._quickChatInfo[i]},o.onBtnChatClicked=function(){this._chatRoot.active=!0},o.onBgClicked=function(){this._chatRoot.active=!1},o.onTabClicked=function(t){"tabQuick"==t.target.name?(this._tabQuick.active=!0,this._tabEmoji.active=!1):"tabEmoji"==t.target.name&&(this._tabQuick.active=!1,this._tabEmoji.active=!0)},o.onQuickChatItemClicked=function(t){this._chatRoot.active=!1;var i=this._quickChatInfo[t.target.name];c.vv().net.send("quick_chat",i.index)},o.onEmojiItemClicked=function(t){console.log(t.target.name),this._chatRoot.active=!1,c.vv().net.send("emoji",t.target.name)},o.onBtnSendChatClicked=function(){this._chatRoot.active=!1,""!=this._iptChat.string&&(c.vv().net.send("chat",this._iptChat.string),this._iptChat.string="")},n}(a))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/CheckBox.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,c,o,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){c=e.cclegacy,o=e._decorator,a=e.Sprite,l=e.Component}],execute:function(){var u,p,s,h,f,d;c._RF.push({},"dc9e5hcegFBFpbh0CwUFw8V","CheckBox",void 0);var b=o.ccclass,k=o.property;e("CheckBox",b("CheckBox")((s=t((p=function(e){function t(){for(var t,r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return t=e.call.apply(e,[this].concat(c))||this,i(t,"target",s,n(t)),i(t,"sprite",h,n(t)),i(t,"checkedSprite",f,n(t)),i(t,"checked",d,n(t)),t}r(t,e);var c=t.prototype;return c.onLoad=function(){this.refresh()},c.onClicked=function(){this.checked=!this.checked,this.refresh()},c.refresh=function(){var e=this.target.getComponent(a);this.checked?e.spriteFrame=this.checkedSprite:e.spriteFrame=this.sprite},t}(l)).prototype,"target",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(p.prototype,"sprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(p.prototype,"checkedSprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(p.prototype,"checked",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=p))||u);c._RF.pop()}}}));

System.register("chunks:///_virtual/CreateRole.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var n,t,o,i,r,a,l,c,s,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.sys,c=e.Canvas,s=e.Component},function(e){u=e.AppGlobal}],execute:function(){var p,f,h;r._RF.push({},"5d56bFYy/REb77pQCq9YHh6","CreateRole",void 0);var d=a.ccclass,m=a.property;e("CreateRole",d("CreateRole")((h=n((f=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"inputName",h,i(n)),n}t(n,e);var r=n.prototype;return r.onRandomBtnClicked=function(){var e=["上官","欧阳","东方","端木","独孤","司马","南宫","夏侯","诸葛","皇甫","长孙","宇文","轩辕","东郭","子车","东阳","子言"],n=["雀圣","赌侠","赌圣","稳赢","不输","好运","自摸","有钱","土豪"],t=Math.floor(Math.random()*(e.length-1)),o=Math.floor(Math.random()*(n.length-1));this.inputName.string=e[t]+n[o]},r.onLoad=function(){if(!l.isNative&&l.isMobile)this.node.getComponent(c);this.onRandomBtnClicked()},r.onBtnConfirmClicked=function(){console.log("confirm clicked");var e=this.inputName.string;""!=e?(console.log(e),u.vv().userMgr.create(e)):console.log("invalid name.")},n}(s)).prototype,"inputName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/CreateRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RadioButton.ts","./AppGlobal.ts","./CheckBox.ts"],(function(e){var t,n,i,o,a,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.Component},function(e){a=e.RadioButton},function(e){r=e.AppGlobal},function(e){c=e.CheckBox}],execute:function(){var h;n._RF.push({},"eec07HsL4pBn5/PiT3SYBew","CreateRoom",void 0);var s=i.ccclass;e("CreateRoom",s("CreateRoom")(h=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._leixingxuanze=void 0,t._gamelist=void 0,t._currentGame=void 0,t._lastType="",t}t(n,e);var i=n.prototype;return i.onLoad=function(){this._gamelist=this.node.getChildByName("game_list"),this._leixingxuanze=[];for(var e=this.node.getChildByName("leixingxuanze"),t=0;t<e.children.length;++t){var n=e.children[t].getComponent(a);null!=n&&this._leixingxuanze.push(n)}},i.onBtnBack=function(){this.node.active=!1},i.onBtnOK=function(){var e=this.getType();-1!=["xzdd","xlch"].indexOf(e)&&(this.node.active=!1,this.createRoom())},i.getType=function(){for(var e=0,t=0;t<this._leixingxuanze.length;++t)if(this._leixingxuanze[t].checked){e=t;break}return 0==e?"xzdd":1==e?"xlch":"xzdd"},i.getSelectedOfRadioGroup=function(e){console.log(e);for(var t=this._currentGame.getChildByName(e),n=[],i=0;i<t.children.length;++i){var o=t.children[i].getComponent("RadioButton");null!=o&&n.push(o)}var a=0;for(i=0;i<n.length;++i)if(n[i].checked){a=i;break}return a},i.createRoom=function(){var e=this.getType(),t=null;("xzdd"==e||"xlch"==e)&&(t=this.constructSCMJConf()),t.type=e;var n={account:r.vv().userMgr.account,sign:r.vv().userMgr.sign,conf:JSON.stringify(t),salt:r.vv().userMgr.salt};console.log(n),r.vv().wc.show("正在创建房间"),r.vv().http.sendRequest("/create_private_room",n,(function(e){0!==e.errcode?(r.vv().wc.hide(),2222==e.errcode?r.vv().alert.show("提示","钻石不足，创建房间失败!"):r.vv().alert.show("提示","创建房间失败,错误码:"+e.errcode)):(console.log("*********** create room "),r.vv().gameNetMgr.connectGameServer(e))}))},i.constructSCMJConf=function(){var e=this._currentGame.getChildByName("wanfaxuanze"),t=e.children[0].getComponent(c).checked,n=e.children[1].getComponent(c).checked,i=e.children[2].getComponent(c).checked,o=e.children[3].getComponent(c).checked;return{difen:this.getSelectedOfRadioGroup("difenxuanze"),zimo:this.getSelectedOfRadioGroup("zimojiacheng"),jiangdui:n,huansanzhang:t,zuidafanshu:this.getSelectedOfRadioGroup("zuidafanshu"),jushuxuanze:this.getSelectedOfRadioGroup("xuanzejushu"),dianganghua:this.getSelectedOfRadioGroup("dianganghua"),menqing:i,tiandihu:o}},i.update=function(e){var t=this.getType();if(this._lastType!=t){this._lastType=t;for(var n=0;n<this._gamelist.children.length;++n)this._gamelist.children[n].active=!1;var i=this._gamelist.getChildByName(t);i&&(i.active=!0),this._currentGame=i}},n}(o))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DingQue.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var t,i,n,a,r,o,s,g,l,u,h,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Node,g=e.Label,l=e.Animation,u=e.Button,h=e.Component},function(e){c=e.AppGlobal}],execute:function(){var d,v,p,m,f,q,y,C;r._RF.push({},"907582awNJFnobC/mZGFLBq","DingQue",void 0);var M=o.ccclass,N=o.property;e("DingQue",(d=M("DingQue"),v=N(s),d((f=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"queYiMen",f,a(t)),n(t,"tips",q,a(t)),n(t,"selected",y,a(t)),n(t,"dingques",C,a(t)),t}i(t,e);var r=t.prototype;return r.start=function(){this.initView(),this.initDingQue(),this.initEventHandlers()},r.initView=function(){var e=this.node.getChildByName("game");this.queYiMen=e.getChildByName("dingque"),this.queYiMen.active=c.vv().gameNetMgr.isDingQueing;for(var t=["myself","right","up","left"],i=0;i<t.length;++i){var n=e.getChildByName(t[i]).getChildByName("seat").getChildByName("que");this.dingques.push(n)}this.reset();var a=this.queYiMen.getChildByName("tips");for(i=0;i<a.children.length;++i){var r=a.children[i];this.tips.push(r.getComponent(g))}"dingque"==c.vv().gameNetMgr.gamestate&&this.showDingQueChoice()},r.initEventHandlers=function(){var e=this;this.node.on("game_dingque",(function(t){e.showDingQueChoice()})),this.node.on("game_dingque_notify",(function(t){var i=c.vv().gameNetMgr.getSeatIndexByID(t),n=c.vv().gameNetMgr.getLocalIndex(i);console.log("game_dingque_notify:"+n),e.tips[n].node.active=!0})),this.node.on("game_dingque_finish",(function(){e.queYiMen.active=!1,c.vv().gameNetMgr.isDingQueing=!1,e.initDingQue()}))},r.showDingQueChoice=function(){this.queYiMen.active=!0;for(var e=c.vv().gameNetMgr.getSelfData(),t=[0,0,0],i=0;i<e.holds.length;++i){var n=e.holds[i];t[c.vv().mahjongmgr.getMahjongType(n)]++}var a=65535,r=0;for(i=0;i<t.length;++i)t[i]<a&&(a=t[i],r=i);var o=["tong","tiao","wan"];for(i=0;i<o.length;++i){var s=this.queYiMen.getChildByName(o[i]);r==i?s.getComponent(l).play("dingque_tuijian"):s.getComponent(l).stop()}this.reset();for(i=0;i<this.tips.length;++i){var g=this.tips[i];g.node.active=!(i>0)}},r.initDingQue=function(){for(var e=["tong","tiao","wan"],t=c.vv().gameNetMgr.seats,i=0;i<t.length;++i){var n=t[i].dingque,a=null;null==n||n<0||n>=e.length?(n=null,a=null):a=e[n];var r=c.vv().gameNetMgr.getLocalIndex(i);a&&(this.dingques[r].getChildByName(a).active=!0)}},r.reset=function(){this.setInteractable(!0),this.selected.push(this.queYiMen.getChildByName("tong_selected")),this.selected.push(this.queYiMen.getChildByName("tiao_selected")),this.selected.push(this.queYiMen.getChildByName("wan_selected"));for(var e=0;e<this.selected.length;++e)this.selected[e].active=!1;for(e=0;e<this.dingques.length;++e)for(var t=0;t<this.dingques[e].children.length;++t)this.dingques[e].children[t].active=!1},r.onQueYiMenClicked=function(e){var t=0;"tong"==e.target.name?t=0:"tiao"==e.target.name?t=1:"wan"==e.target.name&&(t=2);for(var i=0;i<this.selected.length;++i)this.selected[i].active=!1;this.selected[t].active=!0,c.vv().gameNetMgr.dingque=t,c.vv().net.send("dingque",t)},r.setInteractable=function(e){this.queYiMen.getChildByName("tong").getComponent(u).interactable=e,this.queYiMen.getChildByName("tiao").getComponent(u).interactable=e,this.queYiMen.getChildByName("wan").getComponent(u).interactable=e},t}(h)).prototype,"queYiMen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(m.prototype,"tips",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=t(m.prototype,"selected",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(m.prototype,"dingques",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=m))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/Folds.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var n,i,e,o,l,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.Sprite,l=t.Component},function(t){r=t.AppGlobal}],execute:function(){var s;i._RF.push({},"0bf63eiZEFMWbW03o8heqa5","Folds",void 0);var a=e.ccclass;t("Folds",a("Folds")(s=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._folds=null,n}n(i,t);var e=i.prototype;return e.onLoad=function(){this.initView(),this.initEventHandler(),this.initAllFolds()},e.initView=function(){this._folds={};for(var t=this.node.getChildByName("game"),n=["myself","right","up","left"],i=0;i<n.length;++i){for(var e=n[i],l=[],r=t.getChildByName(e).getChildByName("folds"),s=0;s<r.children.length;++s){var a=r.children[s];a.active=!1;var d=a.getComponent(o);d.spriteFrame=null,l.push(d)}this._folds[e]=l}this.hideAllFolds()},e.hideAllFolds=function(){for(var t in this._folds){var n=this._folds[i];for(var i in n)n[i].node.active=!1}},e.initEventHandler=function(){var t=this;this.node.on("game_begin",(function(n){t.initAllFolds()})),this.node.on("game_sync",(function(n){t.initAllFolds()})),this.node.on("game_chupai_notify",(function(n){t.initFolds(n)})),this.node.on("guo_notify",(function(n){t.initFolds(n)}))},e.initAllFolds=function(){var t=r.vv().gameNetMgr.seats;for(var n in t)this.initFolds(t[n])},e.initFolds=function(t){var n=t.folds;if(null!=n){for(var i=r.vv().gameNetMgr.getLocalIndex(t.seatindex),e=r.vv().mahjongmgr.getFoldPre(i),o=r.vv().mahjongmgr.getSide(i),l=this._folds[o],s=0;s<l.length;++s){var a=s;"right"!=o&&"up"!=o||(a=l.length-s-1),(d=l[a]).node.active=!0,this.setSpriteFrameByMJID(e,d,n[s])}for(s=n.length;s<l.length;++s){var d;a=s;"right"!=o&&"up"!=o||(a=l.length-s-1),(d=l[a]).spriteFrame=null,d.node.active=!1}}},e.setSpriteFrameByMJID=function(t,n,i){n.spriteFrame=r.vv().mahjongmgr.getSpriteFrameByMJID(t,i),n.node.active=!0},i}(l))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameNetMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(n){var e,a,t,i,s,o,u,r,d;return{setters:[function(n){e=n.applyDecoratedDescriptor,a=n.inheritsLoose,t=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){s=n.cclegacy,o=n._decorator,u=n.director,r=n.Component},function(n){d=n.AppGlobal}],execute:function(){var l,g,h,c,p,v,f,m,_,y,b,H,I,E,x,w,D,z;s._RF.push({},"9545659TARKZLMoHGqXoY2N","GameNetMgr",void 0);var G=o.ccclass,O=o.property;n("GameNetMgr",G("GameNetMgr")((h=e((g=function(n){function e(){for(var e,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return e=n.call.apply(n,[this].concat(s))||this,t(e,"dataEventHandler",h,i(e)),t(e,"roomId",c,i(e)),t(e,"maxNumOfGames",p,i(e)),t(e,"numOfGames",v,i(e)),t(e,"numOfMJ",f,i(e)),t(e,"seatIndex",m,i(e)),t(e,"seats",_,i(e)),t(e,"turn",y,i(e)),t(e,"button",b,i(e)),t(e,"dingque",H,i(e)),t(e,"chupai",I,i(e)),t(e,"isDingQueing",E,i(e)),t(e,"isHuanSanZhang",x,i(e)),t(e,"gamestate",w,i(e)),t(e,"isOver",D,i(e)),t(e,"dissoveData",z,i(e)),e.curaction=void 0,e.huanpaimethod=void 0,e.conf=void 0,e}a(e,n);var s=e.prototype;return s.reset=function(){this.turn=-1,this.chupai=-1,this.dingque=-1,this.button=-1,this.gamestate="",this.dingque=-1,this.isDingQueing=!1,this.isHuanSanZhang=!1,this.curaction=null;for(var n=0;n<this.seats.length;++n)this.seats[n].holds=[],this.seats[n].folds=[],this.seats[n].pengs=[],this.seats[n].angangs=[],this.seats[n].diangangs=[],this.seats[n].wangangs=[],this.seats[n].dingque=-1,this.seats[n].ready=!1,this.seats[n].hued=!1,this.seats[n].huanpais=null,this.huanpaimethod=-1},s.clear=function(){this.dataEventHandler=null,null==this.isOver&&(this.seats=null,this.roomId=null,this.maxNumOfGames=0,this.numOfGames=0)},s.dispatchEvent=function(n,e){void 0===e&&(e=null),this.dataEventHandler&&(console.warn("check this shit!!!!!!!!!!!!!!"),this.dataEventHandler.emit(n,e))},s.getSeatIndexByID=function(n){for(var e=0;e<this.seats.length;++e){if(this.seats[e].userid==n)return e}return-1},s.isOwner=function(){return 0==this.seatIndex},s.getSeatByID=function(n){var e=this.getSeatIndexByID(n);return this.seats[e]},s.getSelfData=function(){return this.seats[this.seatIndex]},s.getLocalIndex=function(n){return(n-this.seatIndex+4)%4},s.prepareReplay=function(n,e){this.roomId=n.id,this.seats=n.seats,this.turn=e.base_info.button;for(var a=e.base_info,t=0;t<this.seats.length;++t){var i=this.seats[t];i.seatindex=t,i.score=null,i.holds=a.game_seats[t],i.pengs=[],i.angangs=[],i.diangangs=[],i.wangangs=[],i.folds=[],console.log(i),d.vv().userMgr.userId==i.userid&&(this.seatIndex=t)}this.conf={type:a.type,difen:1,zimo:1,jiangdui:!1,huansanzhang:!1,zuidafanshu:4,jushuxuanze:4,dianganghua:0,menqing:!1,tiandihu:!1,maxFan:1,maxGames:10,hsz:!1},null==this.conf.type&&this.conf.type},s.getWanfa=function(){var n=this.conf;if(n&&null!=n.maxGames&&null!=n.maxFan){var e=[];return e.push(n.maxGames+"局"),e.push(n.maxFan+"番封顶"),n.hsz&&e.push("换三张"),1==n.zimo?e.push("自摸加番"):e.push("自摸加底"),n.jiangdui&&e.push("将对"),1==n.dianganghua?e.push("点杠花(自摸)"):e.push("点杠花(放炮)"),n.menqing&&e.push("门清、中张"),n.tiandihu&&e.push("天地胡"),e.join(" ")}return""},s.initHandlers=function(){console.log("gamenet mgr init handlers");var n=this;d.vv().net.addHandler("login_result",(function(e){if(console.log(e),0===e.errcode){e=e.data;n.roomId=e.roomid,n.conf=e.conf,n.maxNumOfGames=e.conf.maxGames,n.numOfGames=e.numofgames,n.seats=e.seats,n.seatIndex=n.getSeatIndexByID(d.vv().userMgr.userId),n.isOver=!1}else console.log(e.errmsg);n.dispatchEvent("login_result")})),d.vv().net.addHandler("login_finished",(function(e){console.log("login_finished"),u.loadScene("mjgame",(function(){d.vv().net.ping(),d.vv().wc.hide()})),n.dispatchEvent("login_finished")})),d.vv().net.addHandler("exit_result",(function(e){n.roomId=null,n.turn=-1,n.dingque=-1,n.isDingQueing=!1,n.seats=null})),d.vv().net.addHandler("exit_notify_push",(function(e){var a=e,t=n.getSeatByID(a);null!=t&&(t.userid=0,t.name="",n.dispatchEvent("user_state_changed",t))})),d.vv().net.addHandler("dispress_push",(function(e){n.roomId=null,n.turn=-1,n.dingque=-1,n.isDingQueing=!1,n.seats=null})),d.vv().net.addHandler("disconnect",(function(e){null==n.roomId?(d.vv().wc.show("正在返回游戏大厅"),u.loadScene("hall")):0==n.isOver?(d.vv().userMgr.oldRoomId=n.roomId,n.dispatchEvent("disconnect")):n.roomId=null})),d.vv().net.addHandler("new_user_comes_push",(function(e){console.log("new_user_comes_push, data: "),console.log(e);var a=e.seatindex,t=!1;n.seats[a].userid>0?(n.seats[a].online=!0,n.seats[a].ip!=e.ip&&(n.seats[a].ip=e.ip,t=!0)):(e.online=!0,n.seats[a]=e,t=!0),n.dispatchEvent("new_user",n.seats[a]),t&&n.dispatchEvent("check_ip",n.seats[a])})),d.vv().net.addHandler("user_state_push",(function(e){var a=e.userid,t=n.getSeatByID(a);t.online=e.online,n.dispatchEvent("user_state_changed",t)})),d.vv().net.addHandler("user_ready_push",(function(e){var a=e.userid,t=n.getSeatByID(a);t.ready=e.ready,n.dispatchEvent("user_state_changed",t)})),d.vv().net.addHandler("game_holds_push",(function(e){var a=n.seats[n.seatIndex];console.log(e),a.holds=e;for(var t=0;t<n.seats.length;++t){var i=n.seats[t];null==i.folds&&(i.folds=[]),null==i.pengs&&(i.pengs=[]),null==i.angangs&&(i.angangs=[]),null==i.diangangs&&(i.diangangs=[]),null==i.wangangs&&(i.wangangs=[]),i.ready=!1}n.dispatchEvent("game_holds")})),d.vv().net.addHandler("game_begin_push",(function(e){console.warn("game begin push"),console.log("game_action_push"),console.log(e),n.button=e,n.turn=n.button,n.gamestate="begin",n.dispatchEvent("game_begin")})),d.vv().net.addHandler("game_playing_push",(function(e){console.log("game_playing_push"),n.gamestate="playing",n.dispatchEvent("game_playing")})),d.vv().net.addHandler("game_sync_push",(function(e){console.log("game_sync_push"),console.log(e),n.numOfMJ=e.numofmj,n.gamestate=e.state,console.warn("********** game state: "+n.gamestate),"dingque"==n.gamestate?n.isDingQueing=!0:"huanpai"==n.gamestate&&(n.isHuanSanZhang=!0),n.turn=e.turn,n.button=e.button,n.chupai=e.chuPai,n.huanpaimethod=e.huanpaimethod;for(var a=0;a<4;++a){var t=n.seats[a],i=e.seats[a];t.holds=i.holds,t.folds=i.folds,t.angangs=i.angangs,t.diangangs=i.diangangs,t.wangangs=i.wangangs,t.pengs=i.pengs,t.dingque=i.que,t.hued=i.hued,t.iszimo=i.iszimo,t.huinfo=i.huinfo,t.huanpais=i.huanpais,a==n.seatIndex&&(n.dingque=i.que)}n.dispatchEvent("game_sync")})),d.vv().net.addHandler("game_dingque_push",(function(e){n.isDingQueing=!0,n.isHuanSanZhang=!1,n.gamestate="dingque",n.dispatchEvent("game_dingque")})),d.vv().net.addHandler("game_huanpai_push",(function(e){n.isHuanSanZhang=!0,n.dispatchEvent("game_huanpai")})),d.vv().net.addHandler("hangang_notify_push",(function(e){n.dispatchEvent("hangang_notify",e)})),d.vv().net.addHandler("game_action_push",(function(e){n.curaction=e,console.log(e),n.dispatchEvent("game_action",e)})),d.vv().net.addHandler("game_chupai_push",(function(e){console.log("game_chupai_push");var a=e,t=n.getSeatIndexByID(a);n.doTurnChange(t)})),d.vv().net.addHandler("game_num_push",(function(e){n.numOfGames=e,n.dispatchEvent("game_num",e)})),d.vv().net.addHandler("game_over_push",(function(e){console.log("game_over_push");for(var a=e.results,t=0;t<n.seats.length;++t)n.seats[t].score=0==a.length?0:a[t].totalscore;n.dispatchEvent("game_over",a),e.endinfo&&(n.isOver=!0,n.dispatchEvent("game_end",e.endinfo)),n.reset();for(t=0;t<n.seats.length;++t)n.dispatchEvent("user_state_changed",n.seats[t])})),d.vv().net.addHandler("mj_count_push",(function(e){console.log("mj_count_push"),n.numOfMJ=e,n.dispatchEvent("mj_count",e)})),d.vv().net.addHandler("hu_push",(function(e){console.log("hu_push"),console.log(e),n.doHu(e)})),d.vv().net.addHandler("game_chupai_notify_push",(function(e){var a=e.userId,t=e.pai,i=n.getSeatIndexByID(a);n.doChupai(i,t)})),d.vv().net.addHandler("game_mopai_push",(function(e){console.log("game_mopai_push"),n.doMopai(n.seatIndex,e)})),d.vv().net.addHandler("guo_notify_push",(function(e){console.log("guo_notify_push");var a=e.userId,t=e.pai,i=n.getSeatIndexByID(a);n.doGuo(i,t)})),d.vv().net.addHandler("guo_result",(function(e){console.log("guo_result"),n.dispatchEvent("guo_result")})),d.vv().net.addHandler("guohu_push",(function(e){console.log("guohu_push"),n.dispatchEvent("push_notice",{info:"过胡",time:1.5})})),d.vv().net.addHandler("huanpai_notify",(function(e){var a=n.getSeatByID(e.si);a.huanpais=e.huanpais,n.dispatchEvent("huanpai_notify",a)})),d.vv().net.addHandler("game_huanpai_over_push",(function(e){console.log("game_huanpai_over_push");var a="",t=e.method;a=0==t?"换对家牌":1==t?"换下家牌":"换上家牌",n.huanpaimethod=t,d.vv().gameNetMgr.isHuanSanZhang=!1,n.dispatchEvent("game_huanpai_over"),n.dispatchEvent("push_notice",{info:a,time:2})})),d.vv().net.addHandler("peng_notify_push",(function(e){console.log("peng_notify_push"),console.log(e);var a=e.userid,t=(e.pai,n.getSeatIndexByID(a));n.doPeng(t,e.pai)})),d.vv().net.addHandler("gang_notify_push",(function(e){console.log("gang_notify_push"),console.log(e);var a=e.userid,t=e.pai,i=n.getSeatIndexByID(a);n.doGang(i,t,e.gangtype)})),d.vv().net.addHandler("game_dingque_notify_push",(function(e){n.dispatchEvent("game_dingque_notify",e)})),d.vv().net.addHandler("game_dingque_finish_push",(function(e){for(var a=0;a<e.length;++a)n.seats[a].dingque=e[a],a==n.seatIndex&&(n.dingque=e[a]);n.dispatchEvent("game_dingque_finish",e)})),d.vv().net.addHandler("chat_push",(function(e){n.dispatchEvent("chat_push",e)})),d.vv().net.addHandler("quick_chat_push",(function(e){n.dispatchEvent("quick_chat_push",e)})),d.vv().net.addHandler("emoji_push",(function(e){n.dispatchEvent("emoji_push",e)})),d.vv().net.addHandler("dissolve_notice_push",(function(e){console.log("dissolve_notice_push"),console.log(e),n.dissoveData=e,n.dispatchEvent("dissolve_notice",e)})),d.vv().net.addHandler("dissolve_cancel_push",(function(e){n.dissoveData=null,n.dispatchEvent("dissolve_cancel",e)})),d.vv().net.addHandler("voice_msg_push",(function(e){n.dispatchEvent("voice_msg",e)}))},s.doGuo=function(n,e){var a=this.seats[n];a.folds.push(e),this.dispatchEvent("guo_notify",a)},s.doMopai=function(n,e){var a=this.seats[n];a.holds&&(a.holds.push(e),this.dispatchEvent("game_mopai",{seatIndex:n,pai:e}))},s.doChupai=function(n,e){this.chupai=e;var a=this.seats[n];if(a.holds){var t=a.holds.indexOf(e);a.holds.splice(t,1)}this.dispatchEvent("game_chupai_notify",{seatData:a,pai:e})},s.doPeng=function(n,e){var a=this.seats[n];if(a.holds)for(var t=0;t<2;++t){var i=a.holds.indexOf(e);a.holds.splice(i,1)}a.pengs.push(e),this.dispatchEvent("peng_notify",a)},s.getGangType=function(n,e){if(-1!=n.pengs.indexOf(e))return"wangang";for(var a=0,t=0;t<n.holds.length;++t)n.holds[t]==e&&a++;return 3==a?"diangang":"angang"},s.doGang=function(n,e,a){void 0===a&&(a=null);var t=this.seats[n];if(a||(a=this.getGangType(t,e)),"wangang"==a){if(-1!=t.pengs.indexOf(e))-1!=(s=t.pengs.indexOf(e))&&t.pengs.splice(s,1);t.wangangs.push(e)}if(t.holds)for(var i=0;i<=4;++i){var s;if(-1==(s=t.holds.indexOf(e)))break;t.holds.splice(s,1)}"angang"==a?t.angangs.push(e):"diangang"==a&&t.diangangs.push(e),this.dispatchEvent("gang_notify",{seatData:t,gangtype:a})},s.doHu=function(n){this.dispatchEvent("hupai",n)},s.doTurnChange=function(n){var e={last:this.turn,turn:n};this.turn=n,this.dispatchEvent("game_chupai",e)},s.connectGameServer=function(n){this.dissoveData=null,d.vv().net.ip=n.ip+":"+n.port,console.log(d.vv().net.ip,"##################!!!!!!!!!!!!!!!!!!!!!%%%%%%%%%");d.vv().wc.show("正在进入房间"),d.vv().net.connect((function(){console.log("onConnectOK");var e={token:n.token,roomid:n.roomid,time:n.time,sign:n.sign};d.vv().net.send("login",e)}),(function(){console.log("failed."),d.vv().wc.hide()}))},e}(r)).prototype,"dataEventHandler",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=e(g.prototype,"roomId",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=e(g.prototype,"maxNumOfGames",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=e(g.prototype,"numOfGames",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=e(g.prototype,"numOfMJ",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=e(g.prototype,"seatIndex",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=e(g.prototype,"seats",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=e(g.prototype,"turn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=e(g.prototype,"button",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),H=e(g.prototype,"dingque",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),I=e(g.prototype,"chupai",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),E=e(g.prototype,"isDingQueing",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=e(g.prototype,"isHuanSanZhang",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=e(g.prototype,"gamestate",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=e(g.prototype,"isOver",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(g.prototype,"dissoveData",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=g))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var n,a,g,t,i,s,h,o;return{setters:[function(e){n=e.inheritsLoose},function(e){a=e.cclegacy,g=e._decorator,t=e.Label,i=e.Sprite,s=e.instantiate,h=e.Component},function(e){o=e.AppGlobal}],execute:function(){var r;a._RF.push({},"facfdljnx5F+rFDAq5Qbmqa","GameOver",void 0);var p=g.ccclass;e("GameOver",p("GameOver")(r=function(e){function a(){for(var n,a=arguments.length,g=new Array(a),t=0;t<a;t++)g[t]=arguments[t];return(n=e.call.apply(e,[this].concat(g))||this)._gameover=void 0,n._gameresult=void 0,n._seats=[],n._isGameEnd=!1,n._pingju=void 0,n._win=void 0,n._lose=void 0,n}n(a,e);var g=a.prototype;return g.onLoad=function(){if(null!=o.vv()&&null!=o.vv().gameNetMgr.conf){"xzdd"==o.vv().gameNetMgr.conf.type?this._gameover=this.node.getChildByName("game_over"):this._gameover=this.node.getChildByName("game_over_xlch"),this._gameover.active=!1,this._pingju=this._gameover.getChildByName("pingju"),this._win=this._gameover.getChildByName("win"),this._lose=this._gameover.getChildByName("lose"),this._gameresult=this.node.getChildByName("game_result"),this._gameover.getChildByName("wanfa").getComponent(t).string=o.vv().gameNetMgr.getWanfa();for(var e=this._gameover.getChildByName("result_list"),n=1;n<=4;++n){var a="s"+n,g=e.getChildByName(a),i={};i.username=g.getChildByName("username").getComponent(t),i.reason=g.getChildByName("reason").getComponent(t);var s=g.getChildByName("fan");null!=s&&(i.fan=s.getComponent(t)),i.score=g.getChildByName("score").getComponent(t),i.hu=g.getChildByName("hu"),i.mahjongs=g.getChildByName("pai"),i.zhuang=g.getChildByName("zhuang"),i.hupai=g.getChildByName("hupai"),i._pengandgang=[],this._seats.push(i)}var h=this;this.node.on("game_over",(function(e){h.onGameOver(e)})),this.node.on("game_end",(function(e){h._isGameEnd=!0}))}},g.onGameOver=function(e){"xzdd"==o.vv().gameNetMgr.conf.type?this.onGameOver_XZDD(e):this.onGameOver_XLCH(e)},g.onGameOver_XZDD=function(e){if(console.log(e),0!=e.length){this._gameover.active=!0,this._pingju.active=!1,this._win.active=!1,this._lose.active=!1;var n=e[o.vv().gameNetMgr.seatIndex].score;n>0?this._win.active=!0:n<0?this._lose.active=!0:this._pingju.active=!0;for(var a=0;a<4;++a){for(var g=this._seats[a],t=e[a],s=!1,h=t.angangs.length+t.wangangs.length+t.diangangs.length,r=t.numofgen,p=[],v=!1,l=0;l<t.actions.length;++l){var u=t.actions[l];"zimo"==u.type||"ganghua"==u.type||"dianganghua"==u.type||"hu"==u.type||"gangpaohu"==u.type||"qiangganghu"==u.type||"chadajiao"==u.type?("7pairs"==t.pattern?p.push("七对"):"l7pairs"==t.pattern?p.push("龙七对"):"j7pairs"==t.pattern?p.push("将七对"):"duidui"==t.pattern?p.push("碰碰胡"):"jiangdui"==t.pattern&&p.push("将对"),"zimo"==u.type?p.push("自摸"):"ganghua"==u.type?p.push("杠上花"):"dianganghua"==u.type?p.push("点杠花"):"gangpaohu"==u.type?p.push("杠炮胡"):"qiangganghu"==u.type?p.push("抢杠胡"):"chadajiao"==u.type&&(v=!0),s=!0):"fangpao"==u.type?p.push("放炮"):"angang"==u.type?p.push("暗杠"):"diangang"==u.type?p.push("明杠"):"wangang"==u.type?p.push("弯杠"):"fanggang"==u.type?p.push("放杠"):"zhuanshougang"==u.type?p.push("转手杠"):"beiqianggang"==u.type?p.push("被抢杠"):"beichadajiao"==u.type&&p.push("被查叫")}s&&(t.qingyise&&p.push("清一色"),t.menqing&&p.push("门清"),t.zhongzhang&&p.push("中张"),t.jingouhu&&p.push("金钩胡"),t.haidihu&&p.push("海底胡"),t.tianhu&&p.push("天胡"),t.dihu&&p.push("地胡"),r>0&&p.push("根x"+r),v&&p.push("查大叫"));for(var m=0;m<3;++m)g.hu.children[m].active=!1;t.huorder>=0&&(g.hu.children[t.huorder].active=!0),g.username.string=o.vv().gameNetMgr.seats[a].name,g.zhuang.active=o.vv().gameNetMgr.button==a,g.reason.string=p.join("、");var d=0;s&&(d=t.fan),g.fan.string=d+"番",t.score>0?g.score.string="+"+t.score:g.score.string=t.score;var c=-1;s&&(c=t.holds.pop()),o.vv().mahjongmgr.sortMJ(t.holds,t.dingque),s&&t.holds.push(c);for(var f=0;f<g.mahjongs.child.length;++f){(y=g.mahjongs.children[f]).active=!1}var _=3*(t.pengs.length+h);for(f=0;f<t.holds.length;++f){var y,j=t.holds[f];(y=g.mahjongs.children[f+_]).active=!0,y.getComponent(i).spriteFrame=o.vv().mahjongmgr.getSpriteFrameByMJID("M_",j)}for(f=0;f<g._pengandgang.length;++f)g._pengandgang[f].active=!1;var C=0,B=t.angangs;for(f=0;f<B.length;++f){var N=B[f];this.initPengAndGangs(g,C,N,"angang"),C++}for(B=t.diangangs,f=0;f<B.length;++f){N=B[f];this.initPengAndGangs(g,C,N,"diangang"),C++}for(B=t.wangangs,f=0;f<B.length;++f){N=B[f];this.initPengAndGangs(g,C,N,"wangang"),C++}var G=t.pengs;if(G)for(f=0;f<G.length;++f){N=G[f];this.initPengAndGangs(g,C,N,"peng"),C++}}}else this._gameresult.active=!0},g.onGameOver_XLCH=function(e){if(console.log(e),0!=e.length){this._gameover.active=!0,this._pingju.active=!1,this._win.active=!1,this._lose.active=!1;var n=e[o.vv().gameNetMgr.seatIndex].score;n>0?this._win.active=!0:n<0?this._lose.active=!0:this._pingju.active=!0;for(var a=0;a<4;++a){for(var g=this._seats[a],t=e[a],s=!1,h=[],r=g.hupai,p=0;p<r.children.length;++p)r.children[p].active=!1;var v=0;for(p=0;p<t.huinfo.length;++p){var l=t.huinfo[p];if(s=s||l.ishupai,l.ishupai&&v<r.children.length){var u=r.children[v];u.active=!0,u.getComponent(i).spriteFrame=o.vv().mahjongmgr.getSpriteFrameByMJID("B_",l.pai),v++}var m="",d="",c=t;l.ishupai?"hu"==l.action?m="接炮胡":"zimo"==l.action?m="自摸":"ganghua"==l.action?m="杠上花":"dianganghua"==l.action?m="点杠花":"gangpaohu"==l.action?m="杠炮胡":"qiangganghu"==l.action?m="抢杠胡":"chadajiao"==l.action&&(m="查大叫"):(m="fangpao"==l.action?"放炮":"gangpao"==l.action?"杠上炮":"beiqianggang"==l.action?"被抢杠":"被查大叫",l=(c=e[l.target]).huinfo[l.index]),m+="(","7pairs"==l.pattern?(m+="七对",d="、"):"l7pairs"==l.pattern?(m+="龙七对",d="、"):"j7pairs"==l.pattern?(m+="将七对",d="、"):"duidui"==l.pattern?(m+="碰碰胡",d="、"):"jiangdui"==l.pattern&&(m+="将对",d="、"),l.haidihu&&(m+=d+"海底胡",d="、"),l.tianhu&&(m+=d+"天胡",d="、"),l.dihu&&(m+=d+"地胡",d="、"),c.qingyise&&(m+=d+"清一色",d="、"),c.menqing&&(m+=d+"门清",d="、"),c.jingouhu&&(m+=d+"金钩胡",d="、"),c.zhongzhang&&(m+=d+"中张",d="、"),l.numofgen>0&&(m+=d+"根x"+l.numofgen,d="、"),""==d&&(m+="平胡"),m+="、"+l.fan+"番",m+=")",h.push(m)}g.hu.active=s,t.angangs.length&&h.push("暗杠x"+t.angangs.length),t.diangangs.length&&h.push("明杠x"+t.diangangs.length),t.wangangs.length&&h.push("巴杠x"+t.wangangs.length),g.username.string=o.vv().gameNetMgr.seats[a].name,g.zhuang.active=o.vv().gameNetMgr.button==a,g.reason.string=h.join("、"),t.score>0?g.score.string="+"+t.score:g.score.string=t.score;for(var f=0;f<g.mahjongs.children.length;++f){(j=g.mahjongs.children[f]).active=!1}o.vv().mahjongmgr.sortMJ(t.holds,t.dingque);var _=t.angangs.length+t.wangangs.length+t.diangangs.length,y=3*(t.pengs.length+_);for(f=0;f<t.holds.length;++f){var j,C=t.holds[f];(j=g.mahjongs.children[f+y]).active=!0,j.getComponent(i).spriteFrame=o.vv().mahjongmgr.getSpriteFrameByMJID("M_",C)}for(f=0;f<g._pengandgang.length;++f)g._pengandgang[f].active=!1;var B=0,N=t.angangs;for(f=0;f<N.length;++f){var G=N[f];this.initPengAndGangs(g,B,G,"angang"),B++}for(N=t.diangangs,f=0;f<N.length;++f){G=N[f];this.initPengAndGangs(g,B,G,"diangang"),B++}for(N=t.wangangs,f=0;f<N.length;++f){G=N[f];this.initPengAndGangs(g,B,G,"wangang"),B++}var M=t.pengs;if(M)for(f=0;f<M.length;++f){G=M[f];this.initPengAndGangs(g,B,G,"peng"),B++}}}else this._gameresult.active=!0},g.initPengAndGangs=function(e,n,a,g){var t=null;e._pengandgang.length<=n?(t=s(o.vv().mahjongmgr.pengPrefabSelf),e._pengandgang.push(t),e.mahjongs.addChild(t)):(t=e._pengandgang[n]).active=!0;for(var h=t.getComponentsInChildren(i),r=0;r<h.length;++r){var p=h[r];if("gang"==p.node.name){var v="peng"!=g;p.node.active=v,p.node.scaleX=1,p.node.scaleY=1,"angang"==g?(p.spriteFrame=o.vv().mahjongmgr.getEmptySpriteFrame("myself"),p.node.scaleX=1.4,p.node.scaleY=1.4):p.spriteFrame=o.vv().mahjongmgr.getSpriteFrameByMJID("B_",a)}else p.spriteFrame=o.vv().mahjongmgr.getSpriteFrameByMJID("B_",a)}t.x=55*n*3+10*n},g.onBtnReadyClicked=function(){console.log("onBtnReadyClicked"),this._isGameEnd?this._gameresult.active=!0:o.vv().net.send("ready"),this._gameover.active=!1},g.onBtnShareClicked=function(){console.log("onBtnShareClicked")},a}(h))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameResult.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var n,t,o,a,s,i,l,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,a=e.utils,s=e.Label,i=e.director,l=e.Component},function(e){r=e.AppGlobal}],execute:function(){var u;t._RF.push({},"2b08d8pm0VBDLYlZIdfLuPS","GameResult",void 0);var c=o.ccclass;e("GameResult",c("GameResult")(u=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this)._gameresult=null,n._seats=[],n}n(t,e);var o=t.prototype;return o.onLoad=function(){if(null!=r.vv()){this._gameresult=this.node.getChildByName("game_result");for(var e=this._gameresult.getChildByName("seats"),n=0;n<e.children.length;++n)this._seats.push(e.children[n].getComponent("Seat"));var t=a.find("game_result/btnClose",this.node);t&&r.vv().utils.addClickEvent(t,this.node,"GameResult","onBtnCloseClicked");var o=a.find("game_result/btnShare",this.node);o&&r.vv().utils.addClickEvent(o,this.node,"GameResult","onBtnShareClicked");var s=this;this.node.on("game_end",(function(e){s.onGameEnd(e)}))}},o.showResult=function(e,n,t){e.node.getChildByName("zuijiapaoshou").active=t,e.node.getChildByName("zimocishu").getComponent(s).string=n.numzimo,e.node.getChildByName("jiepaocishu").getComponent(s).string=n.numjiepao,e.node.getChildByName("dianpaocishu").getComponent(s).string=n.numdianpao,e.node.getChildByName("angangcishu").getComponent(s).string=n.numangang,e.node.getChildByName("minggangcishu").getComponent(s).string=n.numminggang,e.node.getChildByName("chajiaocishu").getComponent(s).string=n.numchadajiao},o.onGameEnd=function(e){for(var n=r.vv().gameNetMgr.seats,t=-1,o=0,a=-1,s=0;s<n.length;++s){(i=n[s]).score>t&&(t=i.score),e[s].numdianpao>o&&(o=e[s].numdianpao,a=s)}for(s=0;s<n.length;++s){var i,l=!1;(i=n[s]).score>0&&(l=i.score==t),this._seats[s].setInfo(i.name,i.score,l),this._seats[s].setID(i.userid);var u=a==s;this.showResult(this._seats[s],e[s],u)}},o.onBtnCloseClicked=function(){r.vv().wc.show("正在返回游戏大厅"),i.loadScene("hall")},o.onBtnShareClicked=function(){r.vv().anysdkMgr.shareResult()},t}(l))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.Component}],execute:function(){var i,s;t._RF.push({},"24e30ZJLgdH3rs1R1CvqN8U","Global",void 0);var c=o.ccclass;e("Global",c("Global")(((s=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(r)).isstarted=!1,s.netinited=!1,s.userguid=0,s.nickname="",s.money=0,s.lv=0,s.roomId=0,i=s))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Hall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts","./ImageLoader.ts","./UserInfoShow.ts"],(function(e){var n,t,i,r,o,s,l,a,u,c,v,g,m,b,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.sys,a=e.director,u=e.utils,c=e.UITransform,v=e.Vec3,g=e.Component},function(e){m=e.AppGlobal},function(e){b=e.ImageLoader},function(e){h=e.UserInfoShow}],execute:function(){var p,d,f,M,y,I,w,G,C,R,k,N,z,x,H;o._RF.push({},"6edb3jjx+FBepS1mk1xKDF2","Hall",void 0);var W=s.ccclass,_=s.property;e("Hall",W("Hall")((f=n((d=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o))||this,i(n,"lblName",f,r(n)),i(n,"lblMoney",M,r(n)),i(n,"lblGems",y,r(n)),i(n,"lblID",I,r(n)),i(n,"lblNotice",w,r(n)),i(n,"joinGameWin",G,r(n)),i(n,"createRoomWin",C,r(n)),i(n,"settingsWin",R,r(n)),i(n,"helpWin",k,r(n)),i(n,"xiaoxiWin",N,r(n)),i(n,"btnJoinGame",z,r(n)),i(n,"btnReturnGame",x,r(n)),i(n,"sprHeadImg",H,r(n)),n}t(n,e);var o=n.prototype;return o.initNetHandlers=function(){},o.onShare=function(){m.vv().anysdkMgr.share("天天麻将","天天麻将，包含了血战到底、血流成河等多种四川流行麻将玩法。")},o.onLoad=function(){if(!l.isNative&&l.isMobile,m.vv()){this.initLabels(),null==m.vv().gameNetMgr.roomId?(this.btnJoinGame.active=!0,this.btnReturnGame.active=!1):(this.btnJoinGame.active=!1,this.btnReturnGame.active=!0);var e=m.vv().userMgr.oldRoomId;null!=e&&(m.vv().userMgr.oldRoomId=null,m.vv().userMgr.enterRoom(e)),this.sprHeadImg.node.getComponent(b).setUserID(m.vv().userMgr.userId),m.vv().utils.addClickEvent(this.sprHeadImg.node,this.node,"Hall","onBtnClicked"),this.addComponent(h),this.initButtonHandler("right_bottom/btn_shezhi"),this.initButtonHandler("right_bottom/btn_help"),this.initButtonHandler("right_bottom/btn_xiaoxi"),this.helpWin.addComponent("OnBack"),this.xiaoxiWin.addComponent("OnBack"),m.vv().userMgr.notice||(m.vv().userMgr.notice={version:null,msg:"数据请求中..."}),m.vv().userMgr.gemstip||(m.vv().userMgr.gemstip={version:null,msg:"数据请求中..."}),this.lblNotice.string=m.vv().userMgr.notice.msg,this.refreshInfo(),this.refreshNotice(),this.refreshGemsTip(),m.vv().audioMgr.playBGM("bgMain.mp3"),m.vv().utils.addEscEvent(this.node)}else a.loadScene("loading")},o.refreshInfo=function(){var e=this,n={account:m.vv().userMgr.account,sign:m.vv().userMgr.sign,salt:m.vv().userMgr.salt||""};m.vv().http.sendRequest("/get_user_status",n,function(n){0!==n.errcode?console.log(n.errmsg):null!=n.gems&&(e.lblGems.string=n.gems)}.bind(this))},o.refreshGemsTip=function(){if(console.log("--------- in the hall, the mgr data: "),console.log(m.vv().userMgr),""!==m.vv().userMgr.salt){var e={account:m.vv().userMgr.account,sign:m.vv().userMgr.sign,type:"fkgm",version:m.vv().userMgr.gemstip.version,salt:m.vv().userMgr.salt||""};m.vv().http.sendRequest("/get_message",e,function(e){0!==e.errcode?console.log(e.errmsg):(m.vv().userMgr.gemstip.version=e.version,m.vv().userMgr.gemstip.msg=e.msg.replace("<newline>","\n"))}.bind(this))}else console.log("&&&&&&&&&& no salt - return")},o.refreshNotice=function(){var e=this,n={account:m.vv().userMgr.account,sign:m.vv().userMgr.sign,type:"notice",version:m.vv().userMgr.notice.version,salt:m.vv().userMgr.salt};m.vv().http.sendRequest("/get_message",n,function(n){0!==n.errcode?console.log(n.errmsg):(m.vv().userMgr.notice.version=n.version,m.vv().userMgr.notice.msg=n.msg,e.lblNotice.string=n.msg)}.bind(this))},o.initButtonHandler=function(e){var n=u.find(e,this.node);m.vv().utils.addClickEvent(n,this.node,"Hall","onBtnClicked")},o.initLabels=function(){this.lblName.string=m.vv().userMgr.userName,this.lblMoney.string=m.vv().userMgr.coins,this.lblGems.string=m.vv().userMgr.gems,this.lblID.string="ID:"+m.vv().userMgr.userId},o.onBtnClicked=function(e){console.log("on btn clicked: "+e.target.name),"btn_shezhi"==e.target.name?this.settingsWin.active=!0:"btn_help"==e.target.name?this.helpWin.active=!0:"btn_xiaoxi"==e.target.name?this.xiaoxiWin.active=!0:"head"==e.target.name&&m.vv().userinfoShow.show(m.vv().userMgr.userName,m.vv().userMgr.userId,this.sprHeadImg,m.vv().userMgr.sex,m.vv().userMgr.ip)},o.onJoinGameClicked=function(){this.joinGameWin.active=!0},o.onReturnGameClicked=function(){m.vv().wc.show("正在返回游戏房间"),a.loadScene("mjgame")},o.onBtnAddGemsClicked=function(){m.vv().alert.show("提示",m.vv().userMgr.gemstip.msg,function(){this.onBtnTaobaoClicked()}.bind(this)),this.refreshInfo()},o.onCreateRoomClicked=function(){null==m.vv().gameNetMgr.roomId?(console.log("onCreateRoomClicked"),this.createRoomWin.active=!0):m.vv().alert.show("提示","房间已经创建!\n必须解散当前房间才能创建新的房间")},o.onBtnTaobaoClicked=function(){l.openURL("https://shop596732896.taobao.com/")},o.update=function(e){var n=this.lblNotice.node.position.x;(n-=100*e)+this.lblNotice.node.getComponent(c).width<-1e3&&(n=500);var t=this.lblNotice.node.position,i=new v(n,t.y,t.z);this.lblNotice.node.setPosition(i),m.vv()&&null!=m.vv().userMgr.roomData&&(m.vv().userMgr.enterRoom(m.vv().userMgr.roomData),m.vv().userMgr.roomData=null)},n}(g)).prototype,"lblName",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(d.prototype,"lblMoney",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(d.prototype,"lblGems",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(d.prototype,"lblID",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(d.prototype,"lblNotice",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(d.prototype,"joinGameWin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(d.prototype,"createRoomWin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(d.prototype,"settingsWin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(d.prototype,"helpWin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(d.prototype,"xiaoxiWin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(d.prototype,"btnJoinGame",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(d.prototype,"btnReturnGame",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(d.prototype,"sprHeadImg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/History.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,e,o,r,c,l,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,l=t.Prefab,u=t.Component}],execute:function(){var a,s,f,p,y;r._RF.push({},"4d7bci0LUxMT6MJKXJDj89w","History",void 0);var m=c.ccclass,d=c.property;t("History",(a=m("History"),s=d(l),a((y=n((p=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return n=t.call.apply(t,[this].concat(r))||this,e(n,"HistoryItemPrefab",y,o(n)),n._history="null",n._viewlist="null",n._content="null",n._viewitemTemp="null",n._historyData="null",n._curRoomInfo="null",n._emptyTip="null",n}i(n,t);var r=n.prototype;return r.onLoad=function(){},r.addClickEvent=function(t,n,i,e){},r.onBtnBackClicked=function(){},r.onBtnHistoryClicked=function(){},r.dateFormat=function(t){},r.initRoomHistoryList=function(t){},r.initGameHistoryList=function(t,n){},r.getViewItem=function(t){},r.shrinkContent=function(t){},r.getGameListOfRoom=function(t){},r.getDetailOfGame=function(t){},r.onViewItemClicked=function(t){},r.onBtnOpClicked=function(t){},n}(u)).prototype,"HistoryItemPrefab",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=p))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/HTTP.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,s,r;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,s=e.sys,r=e.Component}],execute:function(){var l;o._RF.push({},"90ae61J525JQIt5taF3Nce2","HTTP",void 0);var c=n.ccclass,a="http://124.220.156.23:9000";e("HTTP",c("HTTP")(l=function(e){function o(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).sessionId=0,t.userId=0,t.master_url=a,t.url=a,t}t(o,e);var n=o.prototype;return n.sendRequest=function(e,t,o,n){void 0===n&&(n=null);var r=new XMLHttpRequest;r.timeout=5e3;var l="?";for(var c in t)"?"!=l&&(l+="&"),l+=c+"="+t[c];null==n&&(n=this.url);var a=n+e+encodeURI(l);return console.log("RequestURL:"+a),r.open("GET",a,!0),s.isNative&&r.setRequestHeader("Accept-Encoding","text/html;charset=UTF-8"),r.onreadystatechange=function(){if(4===r.readyState&&r.status>=200&&r.status<300){console.log("url: "+e),console.log("http res("+r.responseText.length+"):"+r.responseText);try{var t=JSON.parse(r.responseText);console.log("response json: "+t),null!==o&&o(t)}catch(e){console.log("err:"+e)}finally{console.log("TODO: // what we should do here?"),console.log("#### finally called.")}}},r.send(),r},n.setUrl=function(e){this.url=e},o}(r))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/HuanSanZhang.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(a){var n,i,t,e,h,o,r,u,p,s;return{setters:[function(a){n=a.inheritsLoose},function(a){i=a.cclegacy,t=a._decorator,e=a.utils,h=a.Label,o=a.Button,r=a.Sprite,u=a.math,p=a.Component},function(a){s=a.AppGlobal}],execute:function(){var g;i._RF.push({},"9a096oAgU5HwrxX05ZPNYtW","HuanSanZhang",void 0);var l=t.ccclass;a("HuanSanZhang",l("HuanSanZhang")(g=function(a){function i(){for(var n,i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return(n=a.call.apply(a,[this].concat(t))||this)._huanpaitip=null,n._huanpaiArr=[],n}n(i,a);var t=i.prototype;return t.onLoad=function(){this._huanpaitip=e.find("huansanzhang",this.node),this._huanpaitip.active=s.vv().gameNetMgr.isHuanSanZhang,this._huanpaitip.active&&this.showHuanpai(null==s.vv().gameNetMgr.getSelfData().huanpais),this.initHuaipaiInfo();var a=e.find("huansanzhang/btn_ok",this.node);a&&s.vv().utils.addClickEvent(a,this.node,"HuanSanZhang","onHuanSanZhang");var n=this;this.node.on("game_begin",(function(a){n.initHuaipaiInfo()})),this.node.on("game_huanpai",(function(a){n._huanpaitip.active=!0,n.showHuanpai(!0)})),this.node.on("huanpai_notify",(function(a){a.seatindex==s.vv().gameNetMgr.seatIndex&&n.initHuaipaiInfo()})),this.node.on("game_huanpai_over",(function(a){n._huanpaitip.active=!1;for(var i=0;i<n._huanpaiArr.length;++i)n._huanpaiArr[i].y=0;n._huanpaiArr=[],n.initHuaipaiInfo()})),this.node.on("game_huanpai_result",(function(a){s.vv().gameNetMgr.isHuanSanZhang=!1,n._huanpaitip.active=!1;for(var i=0;i<n._huanpaiArr.length;++i)n._huanpaiArr[i].y=0;n._huanpaiArr=[]})),this.node.on("mj_clicked",(function(a){var i=a,t=n._huanpaiArr.indexOf(i);-1!=t?(i.y=0,n._huanpaiArr.splice(t,1)):n._huanpaiArr.length<3&&(n._huanpaiArr.push(i),i.y=15)}))},t.showHuanpai=function(a){this._huanpaitip.getChildByName("info").getComponent(h).string=a?"请选择三张一样花色的牌":"等待其他玩家选牌...",this._huanpaitip.getChildByName("btn_ok").getComponent(o).interactable=a,this._huanpaitip.getChildByName("mask").active=!1},t.initHuaipaiInfo=function(){var a=e.find("game/huanpaiinfo",this.node),n=s.vv().gameNetMgr.getSelfData();if(null!=n.huanpais){a.active=!0;for(var i=0;i<n.huanpais.length;++i)a.getChildByName("hp"+(i+1)).getComponent(r).spriteFrame=s.vv().mahjongmgr.getSpriteFrameByMJID("M_",n.huanpais[i]);var t=a.getChildByName("hpm");t.active=!0,0==s.vv().gameNetMgr.huanpaimethod?(console.warn(" *********** this may not work!"),t.setRotation(u.quat(0,0,90,0))):1==s.vv().gameNetMgr.huanpaimethod?(console.warn(" *********** this may not work!"),t.setRotation(u.quat(0,0,0,0))):2==s.vv().gameNetMgr.huanpaimethod?(console.warn(" *********** this may not work!"),t.setRotation(u.quat(0,0,180,0))):t.active=!1}else a.active=!1},t.onHuanSanZhang=function(a){if(3==this._huanpaiArr.length){for(var n=null,i=0;i<this._huanpaiArr.length;++i){var t=this._huanpaiArr[i].mjId,e=s.vv().mahjongmgr.getMahjongType(t);if(null==n)n=e;else if(n!=e)return}var r={p1:this._huanpaiArr[0].mjId,p2:this._huanpaiArr[1].mjId,p3:this._huanpaiArr[2].mjId};this._huanpaitip.getChildByName("info").getComponent(h).string="等待其他玩家选牌...",this._huanpaitip.getChildByName("btn_ok").getComponent(o).interactable=!1,this._huanpaitip.getChildByName("mask").active=!0,s.vv().net.send("huanpai",r)}},i}(p))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/ImageLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var t,r,n,a,i,o,s,u,p;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,a=e.sys,i=e.Sprite,o=e.Component,s=e.resources,u=e.SpriteFrame},function(e){p=e.AppGlobal}],execute:function(){var l;r._RF.push({},"ed057Bgp8FHlJbGI+ljAN7d","ImageLoader",void 0);var v=n.ccclass;e("ImageLoader",v("ImageLoader")(l=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._spriteFrame=void 0,t}t(r,e);var n=r.prototype;return n.onLoad=function(){this.setupSpriteFrame()},n.setUserID=function(e){if(0!=a.isNative&&e){null==p.vv().images&&(p.vv().images={});var t=this;!function(e,t){null==p.vv().baseInfoMap&&(p.vv().baseInfoMap={}),null!=p.vv().baseInfoMap[e]?t(e,p.vv().baseInfoMap[e]):p.vv().http.sendRequest("/base_info",{userid:e},(function(r){var n=null;r.headimgurl&&(n=r.headimgurl+".jpg");var a={name:r.name,sex:r.sex,url:n};p.vv().baseInfoMap[e]=a,t(e,a)}),p.vv().http.master_url)}(e,(function(r,n){n&&n.url&&function(e,t,r){s.load(e,(function(e,n){var a=new u;a.texture=n,r(t,a)}))}(n.url,e,(function(e,r){t._spriteFrame=r,t.setupSpriteFrame()}))}))}},n.setupSpriteFrame=function(){if(this._spriteFrame){var e=this.getComponent(i);e&&(e.spriteFrame=this._spriteFrame)}},r}(o))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/JoinGameInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(n){var t,i,o,e,s,u,c,r,l;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,o=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){s=n.cclegacy,u=n._decorator,c=n.Label,r=n.Component},function(n){l=n.AppGlobal}],execute:function(){var p,h,a,d,f;s._RF.push({},"10a1c8jz95Ju4NnpkOWUfin","JoinGameInput",void 0);var I=u.ccclass,m=u.property;n("JoinGameInput",(p=I("JoinGameInput"),h=m([c]),p((f=t((d=function(n){function t(){for(var t,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return t=n.call.apply(n,[this].concat(s))||this,o(t,"nums",f,e(t)),t._inputIndex=0,t}i(t,n);var s=t.prototype;return s.onLoad=function(){},s.onEnable=function(){this.onResetClicked()},s.onInputFinished=function(n){l.vv().userMgr.enterRoom(n,function(t){if(0==t.errcode)this.node.active=!1;else{var i="房间["+n+"]不存在，请重新输入!";4==t.errcode&&(i="房间["+n+"]已满!"),l.vv().alert.show("提示",i),this.onResetClicked()}}.bind(this))},s.onInput=function(n){if(!(this._inputIndex>=this.nums.length)&&(this.nums[this._inputIndex].string=n,this._inputIndex+=1,this._inputIndex==this.nums.length)){var t=this.parseRoomID();console.log("ok:"+t),this.onInputFinished(t)}},s.onN0Clicked=function(){this.onInput(0)},s.onN1Clicked=function(){this.onInput(1)},s.onN2Clicked=function(){this.onInput(2)},s.onN3Clicked=function(){this.onInput(3)},s.onN4Clicked=function(){this.onInput(4)},s.onN5Clicked=function(){this.onInput(5)},s.onN6Clicked=function(){this.onInput(6)},s.onN7Clicked=function(){this.onInput(7)},s.onN8Clicked=function(){this.onInput(8)},s.onN9Clicked=function(){this.onInput(9)},s.onResetClicked=function(){for(var n=0;n<this.nums.length;++n)this.nums[n].string="";this._inputIndex=0},s.onDelClicked=function(){this._inputIndex>0&&(this._inputIndex-=1,this.nums[this._inputIndex].string="")},s.onCloseClicked=function(){this.node.active=!1},s.parseRoomID=function(){for(var n="",t=0;t<this.nums.length;++t)n+=this.nums[t].string;return n},t}(r)).prototype,"nums",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=d))||a));s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,e,n,r,s,a,l,c,g,p,u,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.sys,l=t.Canvas,c=t.loader,g=t.resources,p=t.Texture2D,u=t.director,d=t.Component}],execute:function(){var h,L,f;r._RF.push({},"350d3Ry9aVIqJR27fP2H/z1","LoadingLogic",void 0);var _=s.ccclass,b=s.property;t("LoadingLogic",_("LoadingLogic")((f=i((L=function(t){function i(){for(var i,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"tipLabel",f,n(i)),i._stateStr="",i._progress=0,i._splash="null",i._isLoading=!1,i}o(i,t);var r=i.prototype;return r.onLoad=function(){if(console.log("loading logic on load called!"),!a.isNative&&a.isMobile)this.node.getComponent(l);this.tipLabel.string=this._stateStr,this.startPreloading()},r.startPreloading=function(){this._stateStr="正在加载资源，请稍候",this._isLoading=!0;var t=this;c.onProgress=function(i,o,e){t._isLoading&&(t._progress=i/o)},g.load("textures",p,(function(i,o){t.onLoadComplete()}))},r.onLoadComplete=function(){console.log("load resource complete!!!"),this._isLoading=!1,this._stateStr="准备登陆",u.loadScene("login")},r.update=function(t){if(0!=this._stateStr.length)if(this.tipLabel.string=this._stateStr+" ",this._isLoading)this.tipLabel.string+=Math.floor(100*this._progress)+"%";else for(var i=Math.floor(Date.now()/1e3)%4,o=0;o<i;++o)this.tipLabel.string+="."},i}(d)).prototype,"tipLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=L))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/Login.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var i,n,e,o,a,r,c,l,s,u,d,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Node,l=t.sys,s=t.director,u=t.utils,d=t.Component},function(t){v=t.AppGlobal}],execute:function(){var h,g,p,_,m;a._RF.push({},"572a7Qfh69N9ZLXkNthANfi","Login",void 0);var f=r.ccclass,k=r.property;t("Login",(h=f("Login"),g=k(c),h((m=i((_=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(i=t.call.apply(t,[this].concat(a))||this)._mima=void 0,i._mimaIndex=0,e(i,"btnQuickStart",m,o(i)),i}n(i,t);var a=i.prototype;return a.onLoad=function(){!l.isNative&&l.isMobile,console.log("loade******d"),v.vv().utils.addClickEvent(this.btnQuickStart,this.node,"Login","onBtnQuickStartClicked"),v.vv()?(v.vv().http.url=v.vv().http.master_url,v.vv().net.addHandler("push_need_create_role",(function(){console.log("onLoad:push_need_create_role"),s.loadScene("createrole")})),v.vv().audioMgr.playBGM("bgMain.mp3"),this._mima=["A","A","B","B","A","B","A","B","A","A","A","B","B","B"],l.isNative&&l.os!=l.OS.WINDOWS?(u.find("btn_yk",this.node).active=!1,u.find("btn_weixin",this.node).active=!0):(u.find("btn_yk",this.node).active=!0,u.find("btn_weixin",this.node).active=!1)):s.loadScene("loading")},a.start=function(){var t=l.localStorage.getItem("wx_account"),i=l.localStorage.getItem("wx_sign");if(null!=t&&null!=i){var n={errcode:0,account:t,sign:i};v.vv().userMgr.onAuth(n)}},a.onBtnQuickStartClicked=function(){console.log("******** quick start clicked *"),v.vv().userMgr.guestAuth()},a.onBtnWeichatClicked=function(){var t;null==(t=v.vv().anysdkMgr)||t.login()},a.onBtnMIMAClicked=function(t){this._mima[this._mimaIndex]==t.target.name?(this._mimaIndex++,this._mimaIndex==this._mima.length&&(u.find("btn_yk",this.node).active=!0)):(console.log("oh ho~~~"),this._mimaIndex=0)},i}(d)).prototype,"btnQuickStart",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=_))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/MahjongMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var e,r,i,n,o,l,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.Component},function(t){u=t.AppGlobal}],execute:function(){var s,p,f,g,h,m,c,_,b,y;o._RF.push({},"0ecea6X+IFIK5XFdJe38hXa","MahjongMgr",void 0);var d=l.ccclass,A=l.property,F=[];t("MahjongMgr",d("MahjongMgr")((f=e((p=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"leftAtlas",f,n(e)),i(e,"rightAtlas",g,n(e)),i(e,"bottomAtlas",h,n(e)),i(e,"bottomFoldAtlas",m,n(e)),i(e,"pengPrefabSelf",c,n(e)),i(e,"pengPrefabLeft",_,n(e)),i(e,"emptyAtlas",b,n(e)),i(e,"holdsEmpty",y,n(e)),e._sides=null,e._pres=null,e._foldPres=null,e}r(e,t);var o=e.prototype;return o.onLoad=function(){this._sides=["myself","right","up","left"],this._pres=["M_","R_","B_","L_"],this._foldPres=["B_","R_","B_","L_"],u.vv().mahjongmgr=this;for(var t=1;t<10;++t)F.push("dot_"+t);for(t=1;t<10;++t)F.push("bamboo_"+t);for(t=1;t<10;++t)F.push("character_"+t);F.push("red"),F.push("green"),F.push("white"),F.push("wind_east"),F.push("wind_west"),F.push("wind_south"),F.push("wind_north")},o.getMahjongSpriteByID=function(t){return F[t]},o.getMahjongType=function(t){return t>=0&&t<9?0:t>=9&&t<18?1:t>=18&&t<27?2:void 0},o.getSpriteFrameByMJID=function(t,e){var r=this.getMahjongSpriteByID(e);return r=t+r,"M_"==t?this.bottomAtlas.getSpriteFrame(r):"B_"==t?this.bottomFoldAtlas.getSpriteFrame(r):"L_"==t?this.leftAtlas.getSpriteFrame(r):"R_"==t?this.rightAtlas.getSpriteFrame(r):void 0},o.getAudioURLByMJID=function(t){var e=0;return t>=0&&t<9?e=t+21:t>=9&&t<18?e=t-8:t>=18&&t<27&&(e=t-7),"nv/"+e+".mp3"},o.getEmptySpriteFrame=function(t){return"up"==t?this.emptyAtlas.getSpriteFrame("e_mj_b_up"):"myself"==t?this.emptyAtlas.getSpriteFrame("e_mj_b_bottom"):"left"==t?this.emptyAtlas.getSpriteFrame("e_mj_b_left"):"right"==t?this.emptyAtlas.getSpriteFrame("e_mj_b_right"):void 0},o.getHoldsEmptySpriteFrame=function(t){return"up"==t?this.emptyAtlas.getSpriteFrame("e_mj_up"):"myself"==t?null:"left"==t?this.emptyAtlas.getSpriteFrame("e_mj_left"):"right"==t?this.emptyAtlas.getSpriteFrame("e_mj_right"):void 0},o.sortMJ=function(t,e){var r=this;t.sort((function(t,i){if(e>=0){var n=r.getMahjongType(t),o=r.getMahjongType(i);if(n!=o){if(e==n)return 1;if(e==o)return-1}}return t-i}))},o.getSide=function(t){return this._sides[t]},o.getPre=function(t){return this._pres[t]},o.getFoldPre=function(t){return this._foldPres[t]},e}(a)).prototype,"leftAtlas",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(p.prototype,"rightAtlas",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(p.prototype,"bottomAtlas",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(p.prototype,"bottomFoldAtlas",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=e(p.prototype,"pengPrefabSelf",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(p.prototype,"pengPrefabLeft",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(p.prototype,"emptyAtlas",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(p.prototype,"holdsEmpty",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=p))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./AnysdkMgr.ts","./AudioMgr.ts","./GameNetMgr.ts","./Global.ts","./HTTP.ts","./MahjongMgr.ts","./Net.ts","./ReplayMgr.ts","./SocketWrapper.ts","./UserMgr.ts","./Utils.ts","./VoiceMgr.ts","./Alert.ts","./AppGlobal.ts","./AppStart.ts","./Chat.ts","./CheckBox.ts","./CreateRole.ts","./CreateRoom.ts","./DingQue.ts","./Folds.ts","./GameOver.ts","./GameResult.ts","./Hall.ts","./History.ts","./HuanSanZhang.ts","./ImageLoader.ts","./JoinGameInput.ts","./LoadingLogic.ts","./Login.ts","./MJGame.ts","./MJRoom.ts","./NoticeTip.ts","./OnBack.ts","./PengGangs.ts","./PopupMgr.ts","./RadioButton.ts","./RadioGroupMgr.ts","./ReConnect.ts","./ReplayCtrl.ts","./Seat.ts","./Settings.ts","./Status.ts","./TimePointer.ts","./UserInfoShow.ts","./Voice.ts","./WaitingConnection.ts","./StringUtils.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MJGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts","./NoticeTip.ts","./GameOver.ts","./PengGangs.ts","./TimePointer.ts","./GameResult.ts","./Chat.ts","./Folds.ts","./ReplayCtrl.ts","./PopupMgr.ts","./HuanSanZhang.ts","./ReConnect.ts","./UserInfoShow.ts","./Alert.ts"],(function(e){var t,n,i,a,o,g,r,s,h,v,l,p,m,c,d,u,f,M,y,_,N,C,x,I,j,B,S,b,J,F,O,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,g=e._decorator,r=e.Node,s=e.sys,h=e.director,v=e.Label,l=e.Sprite,p=e.Button,m=e.view,c=e.Animation,d=e.Input,u=e.UIOpacity,f=e.utils,M=e.Component},function(e){y=e.AppGlobal},function(e){_=e.NoticeTip},function(e){N=e.GameOver},function(e){C=e.PengGangs},function(e){x=e.TimePointer},function(e){I=e.GameResult},function(e){j=e.Chat},function(e){B=e.Folds},function(e){S=e.ReplayCtrl},function(e){b=e.PopupMgr},function(e){J=e.HuanSanZhang},function(e){F=e.ReConnect},function(e){O=e.UserInfoShow},function(e){L=e.Alert}],execute:function(){var E,T,H,A,R,D,G;o._RF.push({},"7fa8fcvrqFOj6lhh6xHzd3c","MJGame",void 0);var w=g.ccclass,k=g.property;e("MJGame",(E=w("MJGame"),T=k(r),H=k(r),E((D=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),g=0;g<n;g++)o[g]=arguments[g];return t=e.call.apply(e,[this].concat(o))||this,i(t,"gameRoot",D,a(t)),i(t,"prepareRoot",G,a(t)),t._myMJArr=[],t._options=null,t._selectedMJ=null,t._chupaiSprite=[],t._mjcount=null,t._gamecount=null,t._hupaiTips=[],t._hupaiLists=[],t._playEfxs=[],t._opts=[],t._chupaidrag=null,t}n(t,e);var o=t.prototype;return o.onLoad=function(){!s.isNative&&s.isMobile,y.vv()?(this.addComponent(_),this.addComponent(N),this.addComponent(C),this.addComponent(x),this.addComponent(I),this.addComponent(j),this.addComponent(B),this.addComponent(S),this.addComponent(b),this.addComponent(J),this.addComponent(F),this.addComponent(O),this.addComponent(L),this.initView(),this.initEventHandlers(),this.gameRoot.active=!1,this.prepareRoot.active=!0,this.initWanfaLabel(),this.onGameBeign(),y.vv().audioMgr.playBGM("bgFight.mp3"),y.vv().utils.addEscEvent(this.node)):h.loadScene("loading")},o.initView=function(){var e=this.node.getChildByName("game");this._mjcount=e.getChildByName("mjcount").getComponent(v),this._mjcount.string="剩余"+y.vv().gameNetMgr.numOfMJ+"张",this._gamecount=e.getChildByName("gamecount").getComponent(v),this._gamecount.string=y.vv().gameNetMgr.numOfGames+"/"+y.vv().gameNetMgr.maxNumOfGames+"局";var t=e.getChildByName("myself").getChildByName("holds");this._chupaidrag=e.getChildByName("chupaidrag"),this._chupaidrag.active=!1;for(var n=0;n<t.children.length;++n){var i=t.children[n].getComponent(l);t.children[n].getComponent(p).interactable=!0,this._myMJArr.push(i),i.spriteFrame=null,this.initDragStuffs(t.children[n])}var a=m.getVisibleSize().width;y.vv().utils.setScale(t,{x:a/1280,y:a/1280});var o=["myself","right","up","left"];for(n=0;n<o.length;++n){var g=o[n],r=e.getChildByName(g);this._hupaiTips.push(r.getChildByName("HuPai")),this._hupaiLists.push(r.getChildByName("hupailist")),this._playEfxs.push(r.getChildByName("play_efx").getComponent(c)),this._chupaiSprite.push(r.getChildByName("ChuPai").children[0].getComponent(l));var s=r.getChildByName("opt");s.active=!1;i=s.getChildByName("pai").getComponent(l);var h={node:s,sprite:i};this._opts.push(h)}var d=e.getChildByName("ops");this._options=d,this.hideOptions(null),this.hideChupai()},o.start=function(){this.checkIp()},o.checkIp=function(){if(""!=y.vv().gameNetMgr.gamestate){for(var e=y.vv().gameNetMgr.getSelfData(),t={},n=0;n<y.vv().gameNetMgr.seats.length;++n){var i=y.vv().gameNetMgr.seats[n];null!=i.ip&&i.userid>0&&i!=e&&(t[i.ip]?t[i.ip].push(i.name):t[i.ip]=[i.name])}for(var a in t){var o=t[a];if(o.length>=2){var g=o.join("\n")+"\n\n正在使用同一IP地址进行游戏!";return void y.vv().alert.show("注意",g)}}}},o.initDragStuffs=function(e){e.on(d.EventType.TOUCH_START,function(t){(console.log("cc.Node.EventType.TOUCH_START"),y.vv().gameNetMgr.turn==y.vv().gameNetMgr.seatIndex)&&(e.getComponent(p).interactable&&(e.getComponent(u).opacity=255,this._chupaidrag.active=!1,this._chupaidrag.getComponent(l).spriteFrame=e.getComponent(l).spriteFrame,this._chupaidrag.x=t.getLocationX()-m.getVisibleSize().width/2,this._chupaidrag.y=t.getLocationY()-m.getVisibleSize().height/2))}.bind(this)),e.on(d.EventType.TOUCH_MOVE,function(t){console.log("cc.Node.EventType.TOUCH_MOVE"),y.vv().gameNetMgr.turn==y.vv().gameNetMgr.seatIndex&&e.getComponent(p).interactable&&(Math.abs(t.getDeltaX())+Math.abs(t.getDeltaY())<.5||(this._chupaidrag.active=!0,e.getComponent(u).opacity=150,this._chupaidrag.opacity=255,this._chupaidrag.scaleX=1,this._chupaidrag.scaleY=1,this._chupaidrag.x=t.getLocationX()-m.getVisibleSize().width/2,this._chupaidrag.y=t.getLocationY()-m.getVisibleSize().height/2,y.vv().utils.setLocation(e,{y:0})))}.bind(this)),e.on(d.EventType.TOUCH_END,function(t){y.vv().gameNetMgr.turn==y.vv().gameNetMgr.seatIndex&&e.getComponent(p).interactable&&(console.log("cc.Node.EventType.TOUCH_END"),this._chupaidrag.active=!1,e.getComponent(u).opacity=255,t.getLocationY()>=200&&this.shoot(e.mjId))}.bind(this)),e.on(d.EventType.TOUCH_CANCEL,function(t){var n;y.vv().gameNetMgr.turn==y.vv().gameNetMgr.seatIndex&&null!=(n=e.getComponent(p))&&n.interactable&&(console.log("cc.Node.EventType.TOUCH_CANCEL"),this._chupaidrag.active=!1,e.getComponent(u).opacity=255,t.getLocationY()>=200?this.shoot(e.mjId):t.getLocationY())}.bind(this))},o.hideChupai=function(){for(var e=0;e<this._chupaiSprite.length;++e)this._chupaiSprite[e].node.active=!1},o.initEventHandlers=function(){console.warn("*************** check this handler, may not work"),y.vv().gameNetMgr.dataEventHandler=this.node.eventProcessor;var e=this;this.node.on("game_holds",(function(t){e.initMahjongs(),e.checkQueYiMen()})),this.node.on("game_begin",(function(t){e.onGameBeign(),1==y.vv().gameNetMgr.numOfGames&&e.checkIp()})),this.node.on("check_ip",(function(t){e.checkIp()})),this.node.on("game_sync",(function(t){e.onGameBeign(),e.checkIp()})),this.node.on("game_chupai",(function(t){e.hideChupai(),e.checkQueYiMen(),t.last!=y.vv().gameNetMgr.seatIndex&&e.initMopai(t.last,null),y.vv().replayMgr.isReplay()||t.turn==y.vv().gameNetMgr.seatIndex||e.initMopai(t.turn,-1)})),this.node.on("game_mopai",(function(t){e.hideChupai();var n=t.pai;if(0==y.vv().gameNetMgr.getLocalIndex(t.seatIndex)){var i=e._myMJArr[13];e.setSpriteFrameByMJID("M_",i,n),i.node.mjId=n}else y.vv().replayMgr.isReplay()&&e.initMopai(t.seatIndex,n)})),this.node.on("game_action",(function(t){e.showAction(t)})),this.node.on("hupai",(function(t){var n=(t=t).seatindex,i=y.vv().gameNetMgr.getLocalIndex(n),a=e._hupaiTips[i];a.active=!0,0==i&&e.hideOptions(null);var o=y.vv().gameNetMgr.seats[n];if(o.hued=!0,"xlch"==y.vv().gameNetMgr.conf.type?(a.getChildByName("sprHu").active=!0,a.getChildByName("sprZimo").active=!1,e.initHupai(i,t.hupai),t.iszimo&&(o.seatindex==y.vv().gameNetMgr.seatIndex?(o.holds.pop(),e.initMahjongs()):e.initOtherMahjongs(o))):(a.getChildByName("sprHu").active=!t.iszimo,a.getChildByName("sprZimo").active=t.iszimo,t.iszimo&&0==i||e.initMopai(n,t.hupai)),1==y.vv().replayMgr.isReplay()&&"xlch"!=y.vv().gameNetMgr.conf.type){var g=e._opts[i];g.node.active=!0,g.sprite.spriteFrame=y.vv().mahjongmgr.getSpriteFrameByMJID("M_",t.hupai)}t.iszimo?e.playEfx(i,"play_zimo"):e.playEfx(i,"play_hu"),y.vv().audioMgr.playSFX("nv/hu.mp3")})),this.node.on("mj_count",(function(t){e._mjcount.string="剩余"+y.vv().gameNetMgr.numOfMJ+"张"})),this.node.on("game_num",(function(t){e._gamecount.string=y.vv().gameNetMgr.numOfGames+"/"+y.vv().gameNetMgr.maxNumOfGames+"局"})),this.node.on("game_over",(function(t){e.gameRoot.active=!1,e.prepareRoot.active=!0})),this.node.on("game_chupai_notify",(function(t){e.hideChupai();var n=t.seatData;n.seatindex==y.vv().gameNetMgr.seatIndex?e.initMahjongs():e.initOtherMahjongs(n),e.showChupai();var i=y.vv().mahjongmgr.getAudioURLByMJID(t.pai);y.vv().audioMgr.playSFX(i)})),this.node.on("guo_notify",(function(t){e.hideChupai(),e.hideOptions(null),t.seatindex==y.vv().gameNetMgr.seatIndex&&e.initMahjongs(),y.vv().audioMgr.playSFX("give.mp3")})),this.node.on("guo_result",(function(t){e.hideOptions(null)})),this.node.on("game_dingque_finish",(function(t){e.initMahjongs()})),this.node.on("peng_notify",(function(t){e.hideChupai();var n=t;n.seatindex==y.vv().gameNetMgr.seatIndex?e.initMahjongs():e.initOtherMahjongs(n);var i=e.getLocalIndex(n.seatindex);e.playEfx(i,"play_peng"),y.vv().audioMgr.playSFX("nv/peng.mp3"),e.hideOptions(null)})),this.node.on("gang_notify",(function(t){e.hideChupai();var n=(t=t).seatData,i=t.gangtype;n.seatindex==y.vv().gameNetMgr.seatIndex?e.initMahjongs():e.initOtherMahjongs(n);var a=e.getLocalIndex(n.seatindex);"wangang"==i?(e.playEfx(a,"play_guafeng"),y.vv().audioMgr.playSFX("guafeng.mp3")):(e.playEfx(a,"play_xiayu"),y.vv().audioMgr.playSFX("rain.mp3"))})),this.node.on("hangang_notify",(function(t){var n=e.getLocalIndex(t);e.playEfx(n,"play_gang"),y.vv().audioMgr.playSFX("nv/gang.mp3"),e.hideOptions(null)})),this.node.on("login_result",(function(){e.gameRoot.active=!1,e.prepareRoot.active=!0,console.log("login_result")}))},o.showChupai=function(){var e=y.vv().gameNetMgr.chupai;if(e>=0){var t=this.getLocalIndex(y.vv().gameNetMgr.turn),n=this._chupaiSprite[t];n.spriteFrame=y.vv().mahjongmgr.getSpriteFrameByMJID("M_",e),n.node.active=!0}},o.addOption=function(e,t){for(var n=0;n<this._options.children.length;++n){var i=this._options.children[n];if("op"==i.name&&0==i.active){i.active=!0,i.getChildByName("opTarget").getComponent(l).spriteFrame=y.vv().mahjongmgr.getSpriteFrameByMJID("M_",t);var a=i.getChildByName(e);return a.active=!0,void(a.pai=t)}}},o.hideOptions=function(e){this._options.active=!1;for(var t=0;t<this._options.children.length;++t){var n=this._options.children[t];"op"==n.name&&(n.active=!1,n.getChildByName("btnPeng").active=!1,n.getChildByName("btnGang").active=!1,n.getChildByName("btnHu").active=!1)}},o.showAction=function(e){if(this._options.active&&this.hideOptions(null),e&&(e.hu||e.gang||e.peng)&&(this._options.active=!0,e.hu&&this.addOption("btnHu",e.pai),e.peng&&this.addOption("btnPeng",e.pai),e.gang))for(var t=0;t<e.gangpai.length;++t){var n=e.gangpai[t];this.addOption("btnGang",n)}},o.initWanfaLabel=function(){f.find("infobar/wanfa",this.node).getComponent(v).string=y.vv().gameNetMgr.getWanfa()},o.initHupai=function(e,t){if("xlch"==y.vv().gameNetMgr.conf.type)for(var n=this._hupaiLists[e],i=0;i<n.children.length;++i){var a=n.children[i];if(0==a.active){var o=y.vv().mahjongmgr.getFoldPre(e);a.getComponent(l).spriteFrame=y.vv().mahjongmgr.getSpriteFrameByMJID(o,t),a.active=!0;break}}},o.playEfx=function(e,t){this._playEfxs[e].node.active=!0,this._playEfxs[e].play(t)},o.onGameBeign=function(){console.log("on game begin !!!!!!!!");for(var e=0;e<this._playEfxs.length;++e)this._playEfxs[e].node.active=!1;for(e=0;e<this._hupaiLists.length;++e)for(var t=0;t<this._hupaiLists[e].children.length;++t)this._hupaiLists[e].children[t].active=!1;for(e=0;e<y.vv().gameNetMgr.seats.length;++e){var n=y.vv().gameNetMgr.seats[e],i=y.vv().gameNetMgr.getLocalIndex(e),a=this._hupaiTips[i];if(a.active=n.hued,n.hued&&(a.getChildByName("sprHu").active=!n.iszimo,a.getChildByName("sprZimo").active=n.iszimo),n.huinfo)for(t=0;t<n.huinfo.length;++t){var o=n.huinfo[t];o.ishupai&&this.initHupai(i,o.pai)}}this.hideChupai(),this.hideOptions(null);for(var g=["right","up","left"],r=this.node.getChildByName("game"),s=0;s<g.length;++s){var h=r.getChildByName(g[s]).getChildByName("holds");for(t=0;t<h.children.length;++t){var v=h.children[t];v.active=!0,y.vv().utils.setScale(v,{x:1,y:1}),v.getComponent(l).spriteFrame=y.vv().mahjongmgr.holdsEmpty[s+1]}}if(""!=y.vv().gameNetMgr.gamestate||0!=y.vv().replayMgr.isReplay()){this.gameRoot.active=!0,this.prepareRoot.active=!1,this.initMahjongs();for(var p=y.vv().gameNetMgr.seats,m=0;m<p.length;m++){n=p[m];0!=(i=y.vv().gameNetMgr.getLocalIndex(m))&&(this.initOtherMahjongs(n),m==y.vv().gameNetMgr.turn?this.initMopai(m,-1):this.initMopai(m,null))}this.showChupai(),null!=y.vv().gameNetMgr.curaction&&(this.showAction(y.vv().gameNetMgr.curaction),y.vv().gameNetMgr.curaction=null),this.checkQueYiMen()}},o.onMJClicked=function(e,t){if(console.log("mj clicked ******"),y.vv().gameNetMgr.isHuanSanZhang)this.node.emit("mj_clicked",e.target);else if(y.vv().gameNetMgr.turn==y.vv().gameNetMgr.seatIndex){for(var n=0;n<this._myMJArr.length;++n)if(e.target==this._myMJArr[n].node){if(e.target==this._selectedMJ)return this.shoot(this._selectedMJ.mjId),y.vv().utils.setLocation(this._selectedMJ,{y:0}),void(this._selectedMJ=null);null!=this._selectedMJ&&y.vv().utils.setLocation(this._selectedMJ,{y:0});var i=e.target;if(i){var a=i.position;console.log("pos: "+a),y.vv().utils.setLocation(i,{y:15}),this._selectedMJ=i}return}}else console.log("not your turn."+y.vv().gameNetMgr.turn)},o.shoot=function(e){null!=e&&(console.log("chupai: "+e),y.vv().net.send("chupai",e))},o.getMJIndex=function(e,t){return"right"==e||"up"==e?13-t:t},o.initMopai=function(e,t){var n=y.vv().gameNetMgr.getLocalIndex(e),i=y.vv().mahjongmgr.getSide(n),a=y.vv().mahjongmgr.getFoldPre(n),o=this.node.getChildByName("game").getChildByName(i).getChildByName("holds"),g=this.getMJIndex(i,13),r=o.children[g];if(y.vv().utils.setScale(r,{x:1,y:1}),null==t)r.active=!1;else if(t>=0){r.active=!0,"up"==i&&y.vv().utils.setScale(r,{x:.73,y:.73}),r.getComponent(l).spriteFrame=y.vv().mahjongmgr.getSpriteFrameByMJID(a,t)}else if(null!=t){r.active=!0,"up"==i&&y.vv().utils.setScale(r,{x:1,y:1}),r.getComponent(l).spriteFrame=y.vv().mahjongmgr.getHoldsEmptySpriteFrame(i)}},o.initEmptySprites=function(e){for(var t=y.vv().gameNetMgr.getLocalIndex(e),n=y.vv().mahjongmgr.getSide(t),i=(y.vv().mahjongmgr.getFoldPre(t),this.node.getChildByName("game").getChildByName(n).getChildByName("holds")),a=y.vv().mahjongmgr.getEmptySpriteFrame(n),o=0;o<i.children.length;++o){i.children[o].getComponent(l).spriteFrame=a}},o.initOtherMahjongs=function(e){var t=this.getLocalIndex(e.seatindex);if(0!=t){var n=y.vv().mahjongmgr.getSide(t),i=this.node.getChildByName("game").getChildByName(n).getChildByName("holds"),a=e.pengs.length+e.angangs.length+e.diangangs.length+e.wangangs.length;a*=3;for(var o=0;o<a;++o){var g=this.getMJIndex(n,o);i.children[g].active=!1}var r=y.vv().mahjongmgr.getFoldPre(t),s=this.sortHolds(e);if(null!=s&&s.length>0){for(o=0;o<s.length;++o){g=this.getMJIndex(n,o+a);var h=i.children[g].getComponent(l);"up"==n&&y.vv().utils.setScale(h.node,{x:.73,y:.73}),h.node.active=!0,h.spriteFrame=y.vv().mahjongmgr.getSpriteFrameByMJID(r,s[o])}if(s.length+a==13){var v=this.getMJIndex(n,13);i.children[v].active=!1}}}},o.sortHolds=function(e){var t=e.holds;if(null==t)return null;var n=null,i=t.length;2!=i&&5!=i&&8!=i&&11!=i&&14!=i||(n=t.pop());var a=e.dingque;return y.vv().mahjongmgr.sortMJ(t,a),null!=n&&t.push(n),t},o.initMahjongs=function(){var e=y.vv().gameNetMgr.seats[y.vv().gameNetMgr.seatIndex],t=this.sortHolds(e);if(null!=t){for(var n=3*(e.pengs.length+e.angangs.length+e.diangangs.length+e.wangangs.length),i=0;i<t.length;++i){var a=t[i];(o=this._myMJArr[i+n]).node.mjId=a,o.node.y=0,this.setSpriteFrameByMJID("M_",o,a)}for(i=0;i<n;++i){(o=this._myMJArr[i]).node.mjId=null,o.spriteFrame=null,o.node.active=!1}for(i=n+t.length;i<this._myMJArr.length;++i){var o;(o=this._myMJArr[i]).node.mjId=null,o.spriteFrame=null,o.node.active=!1}}},o.setSpriteFrameByMJID=function(e,t,n){t.spriteFrame=y.vv().mahjongmgr.getSpriteFrameByMJID(e,n),t.node.active=!0},o.checkQueYiMen=function(){if(console.log("on game begin !!!!!!!!"),null!=y.vv().gameNetMgr.conf&&"xlch"==y.vv().gameNetMgr.conf.type&&y.vv().gameNetMgr.getSelfData().hued)if(y.vv().gameNetMgr.seatIndex==y.vv().gameNetMgr.turn)for(n=0;n<14;++n){1==(i=this._myMJArr[n]).node.active&&(i.node.getComponent(p).interactable=13==n)}else for(n=0;n<14;++n){1==(i=this._myMJArr[n]).node.active&&(i.node.getComponent(p).interactable=!0)}else{var e=y.vv().gameNetMgr.dingque,t=!1;if(y.vv().gameNetMgr.seatIndex==y.vv().gameNetMgr.turn)for(var n=0;n<this._myMJArr.length;++n){if(null!=(i=this._myMJArr[n]).node.mjId)if((a=y.vv().mahjongmgr.getMahjongType(i.node.mjId))==e){t=!0;break}}for(var n=0;n<this._myMJArr.length;++n){var i;if(null!=(i=this._myMJArr[n]).node.mjId){var a=y.vv().mahjongmgr.getMahjongType(i.node.mjId);i.node.getComponent(p).interactable=!t||a==e}}}},o.getLocalIndex=function(e){return(e-y.vv().gameNetMgr.seatIndex+4)%4},o.onOptionClicked=function(e){console.log(e.target.pai),"btnPeng"==e.target.name?y.vv().net.send("peng"):"btnGang"==e.target.name?y.vv().net.send("gang",e.target.pai):"btnHu"==e.target.name?y.vv().net.send("hu"):"btnGuo"==e.target.name&&y.vv().net.send("guo")},o.update=function(e){},o.onDestroy=function(){console.log("onDestroy"),y.vv()&&y.vv().gameNetMgr.clear()},t}(M)).prototype,"gameRoot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(R.prototype,"prepareRoot",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=R))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/MJRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var t,n,i,s,a,o,l,r,c,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,r=e.utils,c=e.director,g=e.Component},function(e){h=e.AppGlobal}],execute:function(){var v,u,d,f,m;a._RF.push({},"921dfQJZddJ+5GFUXqxmMmT","MJRoom",void 0);var _=o.ccclass,p=o.property;e("MJRoom",(v=_("MJRoom"),u=p(l),v((m=t((f=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"lblRoomNo",m,s(t)),t._seats=[],t._seats2=[],t._timeLabel=null,t._voiceMsgQueue=[],t._lastPlayingSeat=null,t._playingSeat=null,t._lastPlayTime=null,t._lastMinute=0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){null!=h.vv()&&(this.initView(),this.initSeats(),this.initEventHandlers())},a.initView=function(){for(var e=this.node.getChildByName("prepare").getChildByName("seats"),n=0;n<e.children.length;++n)this._seats.push(e.children[n].getComponent("Seat"));this.refreshBtns(),this.lblRoomNo=r.find("infobar/Z_room_txt/New Label",this.node).getComponent(l),this._timeLabel=r.find("infobar/time",this.node).getComponent(l),this.lblRoomNo.string=h.vv().gameNetMgr.roomId;var i=this.node.getChildByName("game"),s=["myself","right","up","left"];for(n=0;n<s.length;++n){var a=i.getChildByName(s[n]).getChildByName("seat");this._seats2.push(a.getComponent("Seat"))}var o=r.find("prepare/btnWeichat",this.node);o&&h.vv().utils.addClickEvent(o,this.node,t,"onBtnWeichatClicked");var c=r.find("typeTitle",this.node);for(n=0;n<c.children.length;++n)c.children[n].active=!1;if(h.vv().gameNetMgr.conf){var g=h.vv().gameNetMgr.conf.type;null!=g&&""!=g||(g="xzdd"),c.getChildByName(g).active=!0}},a.refreshBtns=function(){var e=this.node.getChildByName("prepare"),t=e.getChildByName("btnExit"),n=e.getChildByName("btnDissolve"),i=e.getChildByName("btnWeichat"),s=e.getChildByName("btnBack"),a=0==h.vv().gameNetMgr.numOfGames;t.active=!h.vv().gameNetMgr.isOwner()&&a,n.active=h.vv().gameNetMgr.isOwner()&&a,i.active=a,s.active=a},a.initEventHandlers=function(){var e=this;this.node.on("new_user",(function(t){e.initSingleSeat(t)})),this.node.on("user_state_changed",(function(t){e.initSingleSeat(t)})),this.node.on("game_begin",(function(t){console.log("********* game begin event"),e.refreshBtns(),e.initSeats()})),this.node.on("game_num",(function(t){e.refreshBtns()})),this.node.on("game_huanpai",(function(t){for(var n in e._seats2)e._seats2[n].refreshXuanPaiState()})),this.node.on("huanpai_notify",(function(t){var n=t.seatindex,i=h.vv().gameNetMgr.getLocalIndex(n);e._seats2[i].refreshXuanPaiState()})),this.node.on("game_huanpai_over",(function(t){for(var n in e._seats2)e._seats2[n].refreshXuanPaiState()})),this.node.on("voice_msg",(function(t){e._voiceMsgQueue.push(t),e.playVoice()})),this.node.on("chat_push",(function(t){var n=h.vv().gameNetMgr.getSeatIndexByID(t.sender),i=h.vv().gameNetMgr.getLocalIndex(n);e._seats[i].chat(t.content),e._seats2[i].chat(t.content)})),this.node.on("quick_chat_push",(function(t){var n=h.vv().gameNetMgr.getSeatIndexByID(t.sender),i=h.vv().gameNetMgr.getLocalIndex(n),s=t.content,a=h.vv().chat.getQuickChatInfo(s);e._seats[i].chat(a.content),e._seats2[i].chat(a.content),h.vv().audioMgr.playSFX(a.sound)})),this.node.on("emoji_push",(function(t){var n=h.vv().gameNetMgr.getSeatIndexByID(t.sender),i=h.vv().gameNetMgr.getLocalIndex(n);console.log(t),e._seats[i].emoji(t.content),e._seats2[i].emoji(t.content)}))},a.initSeats=function(){for(var e=h.vv().gameNetMgr.seats,t=0;t<e.length;++t)this.initSingleSeat(e[t])},a.initSingleSeat=function(e){var t=h.vv().gameNetMgr.getLocalIndex(e.seatindex),n=!e.online,i=e.seatindex==h.vv().gameNetMgr.button;console.log("isOffline:"+n),this._seats[t].setInfo(e.name,e.score),this._seats[t].setReady(e.ready),this._seats[t].setOffline(n),this._seats[t].setID(e.userid),this._seats[t].voiceMsg(!1),this._seats2[t].setInfo(e.name,e.score),this._seats2[t].setZhuang(i),this._seats2[t].setOffline(n),this._seats2[t].setID(e.userid),this._seats2[t].voiceMsg(!1),this._seats2[t].refreshXuanPaiState()},a.onBtnSettingsClicked=function(){h.vv().popupMgr.showSettings()},a.onBtnBackClicked=function(){h.vv().alert.show("返回大厅","返回大厅房间仍会保留，快去邀请大伙来玩吧！",(function(){h.vv().wc.show("正在返回游戏大厅"),c.loadScene("hall")}),!0)},a.onBtnChatClicked=function(){},a.onBtnWeichatClicked=function(){h.vv().gameNetMgr.conf.type},a.onBtnDissolveClicked=function(){h.vv().alert.show("解散房间","解散房间不扣房卡，是否确定解散？",(function(){h.vv().net.send("dispress")}),!0)},a.onBtnExit=function(){h.vv().net.send("exit")},a.playVoice=function(){if(null==this._playingSeat&&this._voiceMsgQueue.length){console.log("playVoice2");var e=this._voiceMsgQueue.shift(),t=h.vv().gameNetMgr.getSeatIndexByID(e.sender),n=h.vv().gameNetMgr.getLocalIndex(t);this._playingSeat=n,this._seats[n].voiceMsg(!0),this._seats2[n].voiceMsg(!0);var i=JSON.parse(e.content),s="voicemsg.amr";console.log(i.msg.length),h.vv().voiceMgr.writeVoice(s,i.msg),h.vv().voiceMgr.play(s),this._lastPlayTime=Date.now()+i.time}},a.update=function(e){var t=Math.floor(Date.now()/1e3/60);if(this._lastMinute!=t){this._lastMinute=t;var n=new Date,i=("00"+n.getHours().toString()).slice(-2),s=("00"+n.getMinutes()).slice(-2);this._timeLabel.string=i+":"+s}null!=this._lastPlayTime?Date.now()>this._lastPlayTime+200&&(this.onPlayerOver(),this._lastPlayTime=null):this.playVoice()},a.onPlayerOver=function(){h.vv().audioMgr.resumeAll(),console.log("onPlayCallback:"+this._playingSeat);var e=this._playingSeat;this._playingSeat=null,this._seats[e].voiceMsg(!1),this._seats2[e].voiceMsg(!1)},a.onDestroy=function(){h.vv().voiceMgr.stop()},t}(g)).prototype,"lblRoomNo",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=f))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/Net.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocketWrapper.ts","./StringUtils.ts","./AppGlobal.ts"],(function(e){var t,n,o,s,i,c,l,r,a,h;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,i=e.game,c=e.Game,l=e.Component},function(e){r=e.WebSocketWrapper},function(e){a=e.StringUtils},function(e){h=e.AppGlobal}],execute:function(){var u;o._RF.push({},"b1cc9yRd15CXqFg0vTGKZUk","Net",void 0);var p=s.ccclass;e("Net",p("Net")(u=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).ip="",t.sio=null,t.testSocket=void 0,t.isPinging=!1,t.fnDisconnect=null,t.handlers=new Map,t.socketWrapper=void 0,t.lastRecieveTime=Date.now(),t.lastSendTime=Date.now(),t.delayMS=0,t}t(o,e);var s=o.prototype;return s.addHandler=function(e,t){if(console.info("++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"),this.handlers.get(e))console.log("event:"+e+"' handler has been registered.");else{var n=function(n){"disconnect"!=e&&"string"==typeof n&&(n=JSON.parse(n)),t(n)};this.handlers.set(e,n),this.sio&&(console.log("register:function "+e),this.socketWrapper.addEventHandler(e,n)),console.log("############# handlers: "+this.handlers.keys)}},s.connect=function(e,t){if(console.log("%%%%%%%%%%%%%%% handlers: "+this.handlers.keys),a.isEmpty(this.ip))return console.error("The server IP is undefined, refuse to connect!"),void t(new ErrorEvent("custom"));this.ip.startsWith("ws://")||(this.ip="ws://"+this.ip),this.sio=new WebSocket(this.ip),this.socketWrapper=new r(this.sio),this.sio.onopen=function(t){console.log("on socket open"),e(t)},this.sio.onclose=function(e){console.log("disconnect")},this.sio.onerror=function(e){console.log("connect_failed"),t(e)};for(var o,s=n(this.handlers);!(o=s()).done;){var i=o.value,c=i[0],l=i[1];"function"==typeof l&&("disconnect"==c?this.fnDisconnect=l:(console.log("register:function "+c),this.socketWrapper.addEventHandler(c,l)))}this.startHearbeat()},s.startHearbeat=function(){this.socketWrapper.addEventHandler("game_pong",(function(t){console.log("game_pong"),e.lastRecieveTime=Date.now(),e.delayMS=e.lastRecieveTime-e.lastSendTime,console.log(e.delayMS)})),this.lastRecieveTime=Date.now();var e=this;console.log(1),e.isPinging||(e.isPinging=!0,i.on(c.EVENT_HIDE,(function(){e.ping()})),setInterval(function(){e.sio&&e.ping()}.bind(this),5e3),setInterval(function(){e.sio&&Date.now()-e.lastRecieveTime>1e4&&e.close()}.bind(this),500))},s.send=function(e,t){void 0===t&&(t=null),this.sio.readyState===WebSocket.OPEN?this.socketWrapper.emit(e,t):console.error("socket is not open")},s.ping=function(){this.sio&&(this.lastSendTime=Date.now(),this.send("game_ping"))},s.close=function(){console.log("close"),this.delayMS=null,this.sio&&this.sio.readyState!==WebSocket.CLOSED&&this.sio.close(),this.sio=null,this.socketWrapper=null,this.fnDisconnect&&(this.fnDisconnect(),this.fnDisconnect=null)},s.test=function(e){var t=this,n=null,o=this.ip.split(":"),s={account:h.vv().userMgr.account,sign:h.vv().userMgr.sign,ip:o[0],port:o[1]};n=h.vv().http.sendRequest("/is_server_online",s,(function(t){e(t.isonline),n=null})),setTimeout((function(){n&&(n.abort(),e(!1))}),1500),this.testSocket=new WebSocket(this.ip),this.testSocket.onopen=function(n){console.log("connect"),t.testSocket.close(),t.testSocket=null,e(!0)},this.testSocket.onerror=function(n){console.log("connect_failed"),t.testSocket=null,e(!1)}},s.emit=function(e,t){console.log("emit event: "+e+", data: "+t),this.send(JSON.stringify({event:e,data:t}))},o}(l))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/NoticeTip.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,n,e,u,c;return{setters:[function(i){t=i.inheritsLoose},function(i){o=i.cclegacy,n=i._decorator,e=i.utils,u=i.Label,c=i.Component}],execute:function(){var s;o._RF.push({},"df61b4+FzFDvbpO5g8UNVIM","NoticeTip",void 0);var h=n.ccclass;i("NoticeTip",h("NoticeTip")(s=function(i){function o(){for(var t,o=arguments.length,n=new Array(o),e=0;e<o;e++)n[e]=arguments[e];return(t=i.call.apply(i,[this].concat(n))||this)._guohu=void 0,t._info=void 0,t._guohuTime=-1,t}t(o,i);var n=o.prototype;return n.onLoad=function(){this._guohu=e.find("tip_notice",this.node),this._guohu.active=!1,this._info=e.find("tip_notice/info",this.node).getComponent(u);var i=this;this.node.on("push_notice",(function(t){t=t;i._guohu.active=!0,i._guohuTime=t.time,i._info.string=t.info}))},n.update=function(i){this._guohuTime>0&&(this._guohuTime-=i,this._guohuTime<0&&(this._guohu.active=!1))},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/OnBack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(n){var t,c,e,o,i;return{setters:[function(n){t=n.inheritsLoose},function(n){c=n.cclegacy,e=n._decorator,o=n.Component},function(n){i=n.AppGlobal}],execute:function(){var a;c._RF.push({},"6fd982Tyi5NOYJWt/fGY8Lj","OnBack",void 0);var r=e.ccclass;n("OnBack",r("OnBack")(a=function(n){function c(){return n.apply(this,arguments)||this}t(c,n);var e=c.prototype;return e.onLoad=function(){var n=this.node.getChildByName("btn_back");i.vv().utils.addClickEvent(n,this.node,"OnBack","onBtnClicked")},e.onBtnClicked=function(n){"btn_back"==n.target.name&&(this.node.active=!1)},c}(o))||a);c._RF.pop()}}}));

System.register("chunks:///_virtual/PengGangs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(n){var e,g,a,i,t,r,o,s,l;return{setters:[function(n){e=n.inheritsLoose},function(n){g=n.cclegacy,a=n._decorator,i=n.view,t=n.Vec3,r=n.instantiate,o=n.Sprite,s=n.Component},function(n){l=n.AppGlobal}],execute:function(){var h;g._RF.push({},"279d9pNFGRB3rD/ngr1LIXQ","PengGangs",void 0);var d=a.ccclass;n("PengGangs",d("PengGangs")(h=function(n){function g(){return n.apply(this,arguments)||this}e(g,n);var a=g.prototype;return a.onLoad=function(){if(l.vv()){var n=this.node.getChildByName("game").getChildByName("myself").getChildByName("penggangs"),e=i.getVisibleSize().width/1280,g=n.scale;n.setScale(new t(g.x*e,g.y*e,g.z));var a=this;this.node.on("peng_notify",(function(n){a.onPengGangChanged(n)})),this.node.on("gang_notify",(function(n){a.onPengGangChanged(n.seatData)})),this.node.on("game_begin",(function(n){a.onGameBein()}));var r=l.vv().gameNetMgr.seats;for(var o in r)this.onPengGangChanged(r[o])}},a.onGameBein=function(){this.hideSide("myself"),this.hideSide("right"),this.hideSide("up"),this.hideSide("left")},a.hideSide=function(n){var e=this.node.getChildByName("game").getChildByName(n).getChildByName("penggangs");if(e)for(var g=0;g<e.children.length;++g)e.children[g].active=!1},a.onPengGangChanged=function(n){if(null!=n.angangs||null!=n.diangangs||null!=n.wangangs||null!=n.pengs){var e=l.vv().gameNetMgr.getLocalIndex(n.seatindex),g=l.vv().mahjongmgr.getSide(e),a=l.vv().mahjongmgr.getFoldPre(e);console.log("onPengGangChanged"+e);for(var i=this.node.getChildByName("game").getChildByName(g).getChildByName("penggangs"),t=0;t<i.children.length;++t)i.children[t].active=!1;var r=0,o=n.angangs;for(t=0;t<o.length;++t){var s=o[t];this.initPengAndGangs(i,g,a,r,s,"angang"),r++}for(o=n.diangangs,t=0;t<o.length;++t){s=o[t];this.initPengAndGangs(i,g,a,r,s,"diangang"),r++}for(o=n.wangangs,t=0;t<o.length;++t){s=o[t];this.initPengAndGangs(i,g,a,r,s,"wangang"),r++}var h=n.pengs;if(h)for(t=0;t<h.length;++t){s=h[t];this.initPengAndGangs(i,g,a,r,s,"peng"),r++}}},a.initPengAndGangs=function(n,e,g,a,i,t){var s=null;n.childrenCount<=a?(s=r("left"==e||"right"==e?l.vv().mahjongmgr.pengPrefabLeft:l.vv().mahjongmgr.pengPrefabSelf),n.addChild(s)):(s=n.children[a]).active=!0,"left"==e?s.y=-25*a*3:"right"==e?(s.y=25*a*3,s.setLocalZOrder(-a)):s.x="myself"==e?55*a*3+10*a:-55*a*3;for(var h=s.getComponentsInChildren(o),d=0;d<h.length;++d){var c=h[d];if("gang"==c.node.name){var m="peng"!=t;c.node.active=m,c.node.scaleX=1,c.node.scaleY=1,"angang"==t?(c.spriteFrame=l.vv().mahjongmgr.getEmptySpriteFrame(e),"myself"!=e&&"up"!=e||(c.node.scaleX=1.4,c.node.scaleY=1.4)):c.spriteFrame=l.vv().mahjongmgr.getSpriteFrameByMJID(g,i)}else c.spriteFrame=l.vv().mahjongmgr.getSpriteFrameByMJID(g,i)}},g}(s))||h);g._RF.pop()}}}));

System.register("chunks:///_virtual/PopupMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var e,s,n,o,i,l,a,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,n=t._decorator,o=t.utils,i=t.Label,l=t.EventHandler,a=t.Button,c=t.Component},function(t){r=t.AppGlobal}],execute:function(){var d;s._RF.push({},"bc0d2VLgL1Avo166tHLsjCJ","PopupMgr",void 0);var v=n.ccclass;t("PopupMgr",v("PopupMgr")(d=function(t){function s(){for(var e,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._popuproot=null,e._settings=null,e._dissolveNotice=null,e._endTime=-1,e._extraInfo=null,e._noticeLabel=null,e}e(s,t);var n=s.prototype;return n.onLoad=function(){if(null!=r.vv()){r.vv().popupMgr=this,this._popuproot=o.find("popups",this.node),this._settings=o.find("popups/settings",this.node),this._dissolveNotice=o.find("popups/dissolve_notice",this.node),this._noticeLabel=this._dissolveNotice.getChildByName("info").getComponent(i),this.closeAll(),this.addBtnHandler("settings/btn_close"),this.addBtnHandler("settings/btn_sqjsfj"),this.addBtnHandler("dissolve_notice/btn_agree"),this.addBtnHandler("dissolve_notice/btn_reject"),this.addBtnHandler("dissolve_notice/btn_ok");var t=this;this.node.on("dissolve_notice",(function(e){var s=e.detail;t.showDissolveNotice(s)})),this.node.on("dissolve_cancel",(function(e){t.closeAll()}))}},n.start=function(){r.vv().gameNetMgr.dissoveData&&this.showDissolveNotice(r.vv().gameNetMgr.dissoveData)},n.addBtnHandler=function(t){var e=o.find("popups/"+t,this.node);this.addClickEvent(e,this.node,"PopupMgr","onBtnClicked")},n.addClickEvent=function(t,e,s,n){var o=new l;o.target=e,o.component=s,o.handler=n,t.getComponent(a).clickEvents.push(o)},n.onBtnClicked=function(t){this.closeAll();var e=t.target.name;"btn_agree"==e?r.vv().net.send("dissolve_agree"):"btn_reject"==e?r.vv().net.send("dissolve_reject"):"btn_sqjsfj"==e&&r.vv().net.send("dissolve_request")},n.closeAll=function(){this._popuproot.active=!1,this._settings.active=!1,this._dissolveNotice.active=!1},n.showSettings=function(){this.closeAll(),this._popuproot.active=!0,this._settings.active=!0},n.showDissolveRequest=function(){this.closeAll(),this._popuproot.active=!0},n.showDissolveNotice=function(t){this._endTime=Date.now()/1e3+t.time,this._extraInfo="";for(var e=0;e<t.states.length;++e){var s=t.states[e],n=r.vv().gameNetMgr.seats[e].name;this._extraInfo+=s?"\n[已同意] "+n:"\n[待确认] "+n}this.closeAll(),this._popuproot.active=!0,this._dissolveNotice.active=!0},n.update=function(t){if(this._endTime>0){var e=this._endTime-Date.now()/1e3;e<0&&(this._endTime=-1);var s=Math.floor(e/60),n=Math.ceil(e-60*s),o="";s>0&&(o+=s+"分"),this._noticeLabel.string=o+n+"秒后房间将自动解散"+this._extraInfo}},s}(c))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/RadioButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts","./RadioGroupMgr.ts"],(function(r){var e,t,i,o,n,a,u,c,l,p;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){n=r.cclegacy,a=r._decorator,u=r.Sprite,c=r.Component},function(r){l=r.AppGlobal},function(r){p=r.RadioGroupMgr}],execute:function(){var s,d,g,f,h,v,b;n._RF.push({},"8d571y2U+9AiKntO+TSf0Fb","RadioButton",void 0);var m=a.ccclass,y=a.property;r("RadioButton",m("RadioButton")((g=e((d=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n))||this,i(e,"target",g,o(e)),i(e,"sprite",f,o(e)),i(e,"checkedSprite",h,o(e)),i(e,"checked",v,o(e)),i(e,"groupId",b,o(e)),e}t(e,r);var n=e.prototype;return n.onLoad=function(){null!=l.vv()&&(null==l.vv().radiogroupmgr&&(l.vv().radiogroupmgr=new p,l.vv().radiogroupmgr.init()),console.log(typeof l.vv().radiogroupmgr.add),l.vv().radiogroupmgr.add(this),this.refresh())},n.refresh=function(){var r=this.target.getComponent(u);this.checked?r.spriteFrame=this.checkedSprite:r.spriteFrame=this.sprite},n.check=function(r){this.checked=r,this.refresh()},n.onClicked=function(){l.vv().radiogroupmgr.check(this)},n.onDestroy=function(){l.vv()&&l.vv().radiogroupmgr&&l.vv().radiogroupmgr.del(this)},e}(c)).prototype,"target",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(d.prototype,"sprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(d.prototype,"checkedSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"checked",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=e(d.prototype,"groupId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),s=d))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/RadioGroupMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var o,t,n,u;return{setters:[function(r){o=r.inheritsLoose},function(r){t=r.cclegacy,n=r._decorator,u=r.Component}],execute:function(){var e;t._RF.push({},"824eapeRYNKY4RJzg2Z4YA2","RadioGroupMgr",void 0);var i=n.ccclass;r("RadioGroupMgr",i("RadioGroupMgr")(e=function(r){function t(){for(var o,t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(o=r.call.apply(r,[this].concat(n))||this)._groups=void 0,o}o(t,r);var n=t.prototype;return n.init=function(){this._groups={}},n.add=function(r){var o=r.groupId,t=this._groups[o];null==t&&(t=[],this._groups[o]=t),t.push(r)},n.del=function(r){var o=r.groupId,t=this._groups[o];if(null!=t){var n=t.indexOf(r);-1!=n&&t.splice(n,1),0==t.length&&delete this._groups[o]}},n.check=function(r){var o=r.groupId,t=this._groups[o];if(null!=t)for(var n=0;n<t.length;++n){var u=t[n];u==r?u.check(!0):u.check(!1)}},t}(u))||e);t._RF.pop()}}}));

System.register("chunks:///_virtual/ReConnect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(n){var e,o,t,i,c,r,a,l;return{setters:[function(n){e=n.inheritsLoose},function(n){o=n.cclegacy,t=n._decorator,i=n.utils,c=n.math,r=n.Component,a=n.director},function(n){l=n.AppGlobal}],execute:function(){var s;o._RF.push({},"7f553G0boRH6KrTE7wACaXx","ReConnect",void 0);var u=t.ccclass;n("ReConnect",u("ReConnect")(s=function(n){function o(){for(var e,o=arguments.length,t=new Array(o),i=0;i<o;i++)t[i]=arguments[i];return(e=n.call.apply(n,[this].concat(t))||this)._reconnect=null,e._lblTip=null,e._loading_image=null,e._lastPing=0,e}e(o,n);var t=o.prototype;return t.onLoad=function(){this._reconnect=i.find("reconnect",this.node),this._loading_image=this._reconnect.getChildByName("loading_image");var n=this,e=function n(){l.vv().net.test((function(e){if(e){l.vv().gameNetMgr.reset();var o=l.vv().userMgr.oldRoomId;null!=o&&(l.vv().userMgr.oldRoomId=null,l.vv().userMgr.enterRoom(o,(function(n){0!=n.errcode&&(l.vv().gameNetMgr.roomId=null,a.loadScene("hall"))})))}else setTimeout(n,3e3)}))},o=function o(t){n.node.off("disconnect",o),n._reconnect.active=!0,e()};console.log("adasfdasdfsdf"),this.node.on("login_finished",(function(){n._reconnect.active=!1,n.node.on("disconnect",o)})),this.node.on("disconnect",o)},t.update=function(n){if(this._reconnect.active){var e=this._loading_image.rotation;this._loading_image.setRotation(c.quat(0,0,e.z-45*n,0))}},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/ReplayCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var t,l,n,a,i,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){l=e.cclegacy,n=e._decorator,a=e.utils,i=e.director,r=e.Component},function(e){o=e.AppGlobal}],execute:function(){var c;l._RF.push({},"21e6a+ajGNDTJwDHbV3A72m","ReplayCtrl",void 0);var s=n.ccclass;e("ReplayCtrl",s("ReplayCtrl")(c=function(e){function l(){for(var t,l=arguments.length,n=new Array(l),a=0;a<l;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._nextPlayTime=1,t._replay=null,t._isPlaying=!0,t}t(l,e);var n=l.prototype;return n.onLoad=function(){null!=o.vv()&&(this._replay=a.find("replay",this.node),this._replay.active=o.vv().replayMgr.isReplay())},n.onBtnPauseClicked=function(){this._isPlaying=!1},n.onBtnPlayClicked=function(){this._isPlaying=!0},n.onBtnBackClicked=function(){o.vv().replayMgr.clear(),o.vv().gameNetMgr.reset(),o.vv().gameNetMgr.roomId=null,o.vv().wc.show("正在返回游戏大厅"),i.loadScene("hall")},n.update=function(e){o.vv()&&this._isPlaying&&1==o.vv().replayMgr.isReplay()&&this._nextPlayTime>0&&(this._nextPlayTime-=e,this._nextPlayTime<0&&(this._nextPlayTime=o.vv().replayMgr.takeAction()))},l}(r))||c);l._RF.pop()}}}));

System.register("chunks:///_virtual/ReplayMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var n,e,i,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Component},function(t){r=t.AppGlobal}],execute:function(){var a;e._RF.push({},"1a6a1p86NFL6KZEZCnbu7tt","ReplayMgr",void 0);var s=i.ccclass;t("ReplayMgr",s("ReplayMgr")(a=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._lastAction=null,n._actionRecords=void 0,n._currentIndex=0,n}n(e,t);var i=e.prototype;return i.onLoad=function(){},i.clear=function(){this._lastAction=null,this._actionRecords=null,this._currentIndex=0},i.init=function(t){this._actionRecords=t.action_records,null==this._actionRecords&&(this._actionRecords=[]),this._currentIndex=0,this._lastAction=null},i.isReplay=function(){return null!=this._actionRecords},i.getNextAction=function(){return this._currentIndex>=this._actionRecords.length?null:{si:this._actionRecords[this._currentIndex++],type:this._actionRecords[this._currentIndex++],pai:this._actionRecords[this._currentIndex++]}},i.takeAction=function(){var t=this.getNextAction();return null!=this._lastAction&&1==this._lastAction.type&&null!=t&&3!=t.type&&4!=t.type&&5!=t.type&&r.vv().gameNetMgr.doGuo(this._lastAction.si,this._lastAction.pai),this._lastAction=t,null==t?-1:1==t.type?(r.vv().gameNetMgr.doChupai(t.si,t.pai),1):2==t.type?(r.vv().gameNetMgr.doMopai(t.si,t.pai),r.vv().gameNetMgr.doTurnChange(t.si),.5):3==t.type?(r.vv().gameNetMgr.doPeng(t.si,t.pai),r.vv().gameNetMgr.doTurnChange(t.si),1):4==t.type?(r.vv().gameNetMgr.dispatchEvent("hangang_notify",t.si),r.vv().gameNetMgr.doGang(t.si,t.pai+""),r.vv().gameNetMgr.doTurnChange(t.si),1):5==t.type?(r.vv().gameNetMgr.doHu({seatindex:t.si,hupai:t.pai,iszimo:!1}),1.5):void 0},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Seat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts","./ImageLoader.ts"],(function(i){var e,t,s,n,a,h,l,o,_,c;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,s=i._decorator,n=i.Label,a=i.Button,h=i.Sprite,l=i.Animation,o=i.Component},function(i){_=i.AppGlobal},function(i){c=i.ImageLoader}],execute:function(){var u;t._RF.push({},"820870ltMZNDYlvzr+qCDEJ","Seat",void 0);var r=s.ccclass;i("Seat",r("Seat")(u=function(i){function t(){for(var e,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return(e=i.call.apply(i,[this].concat(s))||this)._sprIcon=null,e._zhuang=null,e._ready=null,e._offline=null,e._lblName=null,e._lblScore=null,e._scoreBg=null,e._nddayingjia=null,e._voicemsg=null,e._xuanpai=null,e._chatBubble=null,e._emoji=null,e._lastChatTime=-1,e._userName="",e._score=0,e._dayingjia=!1,e._isOffline=!1,e._isReady=!1,e._isZhuang=!1,e._userId=null,e}e(t,i);var s=t.prototype;return s.onLoad=function(){null!=_.vv()&&(this._sprIcon=this.node.getChildByName("icon").getComponent(c),this._lblName=this.node.getChildByName("name").getComponent(n),this._lblScore=this.node.getChildByName("score").getComponent(n),this._voicemsg=this.node.getChildByName("voicemsg"),this._xuanpai=this.node.getChildByName("xuanpai"),this.refreshXuanPaiState(),this._voicemsg&&(this._voicemsg.active=!1),this._sprIcon&&this._sprIcon.getComponent(a)&&(console.log("adding click event for the icon "),_.vv().utils.addClickEvent(this._sprIcon,this.node,"Seat","onIconClicked")),this._offline=this.node.getChildByName("offline"),this._ready=this.node.getChildByName("ready"),this._zhuang=this.node.getChildByName("zhuang"),this._scoreBg=this.node.getChildByName("Z_money_frame"),this._nddayingjia=this.node.getChildByName("dayingjia"),this._chatBubble=this.node.getChildByName("ChatBubble"),null!=this._chatBubble&&(this._chatBubble.active=!1),this._emoji=this.node.getChildByName("emoji"),null!=this._emoji&&(this._emoji.active=!1),this.refresh(),this._sprIcon&&this._userId&&this._sprIcon.setUserID(this._userId))},s.onIconClicked=function(){console.log("on icon clicked!!");var i=this._sprIcon.node.getComponent(h);if(null!=this._userId&&this._userId>0){var e=_.vv().gameNetMgr.getSeatByID(this._userId),t=0;if(_.vv().baseInfoMap){var s=_.vv().baseInfoMap[this._userId];s&&(t=s.sex)}_.vv().userinfoShow.show(e.name,e.userid,i,t,e.ip)}},s.refresh=function(){null!=this._lblName&&(this._lblName.string=this._userName),null!=this._lblScore&&(this._lblScore.string=this._score+""),null!=this._nddayingjia&&(this._nddayingjia.active=1==this._dayingjia),this._offline&&(this._offline.active=this._isOffline&&""!=this._userName),this._ready&&(this._ready.active=this._isReady&&_.vv().gameNetMgr.numOfGames>0),this._zhuang&&(this._zhuang.active=this._isZhuang),this.node.active=null!=this._userName&&""!=this._userName},s.setInfo=function(i,e,t){this._userName=i,this._score=e,null==this._score&&(this._score=0),this._dayingjia=t,null!=this._scoreBg&&(this._scoreBg.active=null!=this._score),null!=this._lblScore&&(this._lblScore.node.active=null!=this._score),this.refresh()},s.setZhuang=function(i){this._isZhuang=i,this._zhuang&&(this._zhuang.active=i)},s.setReady=function(i){this._isReady=i,this._ready&&(this._ready.active=this._isReady&&_.vv().gameNetMgr.numOfGames>0)},s.setID=function(i){var e=this.node.getChildByName("id");e&&(e.getComponent(n).string="ID:"+i);this._userId=i,this._sprIcon&&this._sprIcon.setUserID(i)},s.setOffline=function(i){this._isOffline=i,this._offline&&(this._offline.active=this._isOffline&&""!=this._userName)},s.chat=function(i){null!=this._chatBubble&&null!=this._emoji&&(this._emoji.active=!1,this._chatBubble.active=!0,this._chatBubble.getComponent(n).string=i,this._chatBubble.getChildByName("New Label").getComponent(n).string=i,this._lastChatTime=3)},s.emoji=function(i){null!=this._emoji&&null!=this._emoji&&(console.log(i),this._chatBubble.active=!1,this._emoji.active=!0,this._emoji.getComponent(l).play(i),this._lastChatTime=3)},s.voiceMsg=function(i){this._voicemsg&&(this._voicemsg.active=i)},s.refreshXuanPaiState=function(){if(null!=this._xuanpai&&(this._xuanpai.active=_.vv().gameNetMgr.isHuanSanZhang,0!=_.vv().gameNetMgr.isHuanSanZhang)){this._xuanpai.getChildByName("xz").active=!1,this._xuanpai.getChildByName("xd").active=!1;var i=_.vv().gameNetMgr.getSeatByID(this._userId);i&&(null==i.huanpais?this._xuanpai.getChildByName("xz").active=!0:this._xuanpai.getChildByName("xd").active=!0)}},s.update=function(i){this._lastChatTime>0&&(this._lastChatTime-=i,this._lastChatTime<0&&(this._chatBubble.active=!1,this._emoji.active=!1,this._emoji.getComponent(l).stop()))},t}(o))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Settings.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var t,n,i,o,s,l,a,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.Slider,s=e.sys,l=e.director,a=e.Component},function(e){r=e.AppGlobal}],execute:function(){var d;n._RF.push({},"4c04fyd89JAZY7qGjvubi+f","Settings",void 0);var u=i.ccclass;e("Settings",u("Settings")(d=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._btnYXOpen=null,t._btnYXClose=null,t._btnYYOpen=null,t._btnYYClose=null,t}t(n,e);var i=n.prototype;return i.onLoad=function(){if(null!=r.vv()){this._btnYXOpen=this.node.getChildByName("yinxiao").getChildByName("btn_yx_open"),this._btnYXClose=this.node.getChildByName("yinxiao").getChildByName("btn_yx_close"),this._btnYYOpen=this.node.getChildByName("yinyue").getChildByName("btn_yy_open"),this._btnYYClose=this.node.getChildByName("yinyue").getChildByName("btn_yy_close"),this.initButtonHandler(this.node.getChildByName("btn_close")),this.initButtonHandler(this.node.getChildByName("btn_exit")),this.initButtonHandler(this._btnYXOpen),this.initButtonHandler(this._btnYXClose),this.initButtonHandler(this._btnYYOpen),this.initButtonHandler(this._btnYYClose);var e=this.node.getChildByName("yinxiao").getChildByName("progress");r.vv().utils.addSlideEvent(e,this.node,"Settings","onSlided");e=this.node.getChildByName("yinyue").getChildByName("progress");r.vv().utils.addSlideEvent(e,this.node,"Settings","onSlided"),this.refreshVolume()}},i.onSlided=function(e){"yinxiao"==e.node.parent.name?r.vv().audioMgr.setSFXVolume(e.progress):"yinyue"==e.node.parent.name&&r.vv().audioMgr.setBGMVolume(e.progress),this.refreshVolume()},i.initButtonHandler=function(e){r.vv().utils.addClickEvent(e,this.node,"Settings","onBtnClicked")},i.refreshVolume=function(){this._btnYXClose.active=r.vv().audioMgr.sfxVolume>0,this._btnYXOpen.active=!this._btnYXClose.active;var e=this.node.getChildByName("yinxiao"),t=430*r.vv().audioMgr.sfxVolume;(n=e.getChildByName("progress")).getComponent(o).progress=r.vv().audioMgr.sfxVolume,r.vv().utils.setSize(n.getChildByName("progress"),{width:t}),this._btnYYClose.active=r.vv().audioMgr.bgmVolume>0,this._btnYYOpen.active=!this._btnYYClose.active;var n,i=this.node.getChildByName("yinyue");t=430*r.vv().audioMgr.bgmVolume;(n=i.getChildByName("progress")).getComponent(o).progress=r.vv().audioMgr.bgmVolume,r.vv().utils.setSize(n.getChildByName("progress"),{width:t})},i.onBtnClicked=function(e){"btn_close"==e.target.name?this.node.active=!1:"btn_exit"==e.target.name?(s.localStorage.removeItem("wx_account"),s.localStorage.removeItem("wx_sign"),l.loadScene("login")):"btn_yx_open"==e.target.name?(r.vv().audioMgr.setSFXVolume(1),this.refreshVolume()):"btn_yx_close"==e.target.name?(r.vv().audioMgr.setSFXVolume(0),this.refreshVolume()):"btn_yy_open"==e.target.name?(r.vv().audioMgr.setBGMVolume(1),this.refreshVolume()):"btn_yy_close"==e.target.name&&(r.vv().audioMgr.setBGMVolume(0),this.refreshVolume())},n}(a))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/SocketWrapper.ts",["cc"],(function(e){var t,s;return{setters:[function(e){t=e.cclegacy,s=e._decorator}],execute:function(){t._RF.push({},"7d6f8KOZ9lA0bUQZ1/pwGYZ","SocketWrapper",void 0);s.ccclass,s.property,e("WebSocketWrapper",function(){function e(e){var t=this;this.eventHandlers={},this.socket=void 0,this.socket=e,this.socket.onmessage=function(e){t.processEvent(e.data)}}var t=e.prototype;return t.addEventHandler=function(e,t){this.eventHandlers[e]?console.log(" the event handler already exists: "+e):this.eventHandlers[e]=t},t.processEvent=function(e){console.log("process raw message: "+e);try{var t=JSON.parse(e);if(Array.isArray(t)&&t.length>0){console.info("this is event message, delegate ...\n eventname: "+t[0]+", \ndata: "),console.log(t[1]);var s=t[0];this.eventHandlers[s]&&this.eventHandlers[s](t[1]||"")}}catch(e){console.error("failed to parse raw message, this is an unkown event!\n"+e),console.error(e.stack)}},t.emit=function(e,t){void 0===t&&(t=""),this.socket.send(JSON.stringify([e,t]))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Status.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var t,n,o,l,r,s,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,l=e.Color,r=e.Label,s=e.Component},function(e){a=e.AppGlobal}],execute:function(){var i;n._RF.push({},"fd3edE3qshGh6sGwORSirVf","Status",void 0);var c=o.ccclass;e("Status",c("Status")(i=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this).red=null,t.green=null,t.yellow=null,t}t(n,e);var o=n.prototype;return o.start=function(){this.red=new l(205,0,0),this.green=new l(0,205,0),this.yellow=new l(255,200,0)},o.update=function(e){var t,n=this.node.getChildByName("delay");null!=a.vv().net.delayMS?(n.getComponent(r).string=a.vv().net.delayMS+"ms",a.vv().net.delayMS>800?n.getComponent(r).color=this.red:a.vv().net.delayMS>300?n.getComponent(r).color=this.yellow:n.getComponent(r).color=this.green):(n.getComponent(r).string="N/A",n.getComponent(r).color=this.red);var o=this.node.getChildByName("power");a.vv().utils.setScale(o,{x:(null==(t=a.vv().anysdkMgr)?void 0:t.getBatteryPercent())||100})},n}(s))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"e6411I6zM1BUJH2E0IGuQPM","StringUtils",void 0);t("StringUtils",function(){function t(){}return t.isEmpty=function(t){return null==t||""===t},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TimePointer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var i,e,r,n,a,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,n=t.Label,a=t.Component},function(t){o=t.AppGlobal}],execute:function(){var l;e._RF.push({},"5b586erPK1H5bFfrMKWs+Y6","TimePointer",void 0);var s=r.ccclass;t("TimePointer",s("TimePointer")(l=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(i=t.call.apply(t,[this].concat(r))||this)._arrow=null,i._pointer=null,i._timeLabel=null,i._time=-1,i._alertTime=-1,i}i(e,t);var r=e.prototype;return r.onLoad=function(){var t=this.node.getChildByName("game");this._arrow=t.getChildByName("arrow"),this._pointer=this._arrow.getChildByName("pointer"),this.initPointer(),this._timeLabel=this._arrow.getChildByName("lblTime").getComponent(n),this._timeLabel.string="00";var i=this;this.node.on("game_begin",(function(t){i.initPointer()})),this.node.on("game_chupai",(function(t){i.initPointer(),i._time=10,i._alertTime=3}))},r.initPointer=function(){if(null!=o.vv()&&(this._arrow.active="playing"==o.vv().gameNetMgr.gamestate,this._arrow.active))for(var t=o.vv().gameNetMgr.turn,i=o.vv().gameNetMgr.getLocalIndex(t),e=0;e<this._pointer.children.length;++e)this._pointer.children[e].active=e==i},r.update=function(t){if(this._time>0){this._time-=t,this._alertTime>0&&this._time<this._alertTime&&(o.vv().audioMgr.playSFX("timeup_alarm.mp3"),this._alertTime=-1);var i="";this._time<0&&(this._time=0);var e=Math.ceil(this._time);e<10&&(i="0"),this._timeLabel.string=i+e}},e}(a))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/UserInfoShow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var i,t,n,o,s,r,a,f;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,o=e.utils,s=e.Sprite,r=e.Label,a=e.Component},function(e){f=e.AppGlobal}],execute:function(){var u;t._RF.push({},"fe4f16CAmpBlZphnpsH1ETv","UserInfoShow",void 0);var c=n.ccclass;e("UserInfoShow",c("UserInfoShow")(u=function(e){function t(){for(var i,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(i=e.call.apply(e,[this].concat(n))||this)._userinfo=void 0,i}i(t,e);var n=t.prototype;return n.onLoad=function(){null!=f.vv()&&(this._userinfo=o.find("userinfo",this.node),this._userinfo.active=!1,f.vv().utils.addClickEvent(this._userinfo,this.node,"UserInfoShow","onClicked"),f.vv().userinfoShow=this)},n.show=function(e,i,t,n,o){if(null!=i&&i>0){this._userinfo.active=!0,this._userinfo.getChildByName("icon").getComponent(s).spriteFrame=t.spriteFrame,this._userinfo.getChildByName("name").getComponent(r).string=e,this._userinfo.getChildByName("ip").getComponent(r).string="IP: "+o.replace("::ffff:",""),this._userinfo.getChildByName("id").getComponent(r).string="ID: "+i;var a=this._userinfo.getChildByName("sex_female");a.active=!1;var f=this._userinfo.getChildByName("sex_male");f.active=!1,1==n?f.active=!0:2==n&&(a.active=!0)}},n.onClicked=function(){this._userinfo.active=!1},t}(a))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/UserMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var t,o,n,r,i,l,a,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,a=e.sys,c=e.Component,u=e.director},function(e){s=e.AppGlobal}],execute:function(){var g,p,v,f,m,b,d,h,y,w,z,M,_,R,I,x,D;i._RF.push({},"74d78JBqHdDKY6hckY2YuL+","UserMgr",void 0);var S=l.ccclass,q=l.property;e("UserMgr",S("UserMgr")((v=t((p=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"account",v,r(t)),n(t,"userId",f,r(t)),n(t,"userName",m,r(t)),n(t,"lv",b,r(t)),n(t,"exp",d,r(t)),n(t,"coins",h,r(t)),n(t,"gems",y,r(t)),n(t,"sign",w,r(t)),n(t,"salt",z,r(t)),n(t,"ip",M,r(t)),n(t,"sex",_,r(t)),n(t,"roomData",R,r(t)),n(t,"oldRoomId",I,r(t)),n(t,"notice",x,r(t)),n(t,"gemstip",D,r(t)),t}o(t,e);var i=t.prototype;return i.guestAuth=function(){var e=a.localStorage.getItem("account");null==e&&(e=a.localStorage.getItem("account")),null==e&&(e=Date.now(),a.localStorage.setItem("account",e)),s.vv().http.sendRequest("/guest",{account:e},this.onAuth)},i.onAuth=function(e){var t=s.vv().userMgr;0!==e.errcode?console.log(e.errmsg):(t.account=e.account,t.sign=e.sign,t.salt=e.salt,console.log("server info: "+s.vv().SI),s.vv().http.url=s.vv().SI.hall,t.login())},i.login=function(){var e=this;s.vv().wc.show("正在登录游戏"),s.vv().http.sendRequest("/login",{account:this.account,sign:this.sign,salt:this.salt},(function(t){0!==t.errcode?console.log(t.errmsg):(console.log("login response: "),console.log(t),t.userid?(console.log(t),e.account=t.account,e.userId=t.userid,e.userName=t.name,e.lv=t.lv,e.exp=t.exp,e.coins=t.coins,e.gems=t.gems,e.roomData=t.roomid,e.sex=t.sex,e.ip=t.ip,console.log("*****load screen hall"),u.loadScene("hall")):(console.log("*****load screen createrole"),u.loadScene("createrole")))}))},i.create=function(e){var t=this,o={account:this.account,sign:this.sign,name:e,salt:this.salt};s.vv().http.sendRequest("/create_user",o,(function(e){console.log("crate role response: "),console.log(e),0!==e.errcode?console.log(e.errmsg):t.login()}))},i.enterRoom=function(e,t){var o=this,n={account:s.vv().userMgr.account,sign:s.vv().userMgr.sign,roomid:e,salt:this.salt};s.vv().wc.show("正在进入房间 "+e),s.vv().http.sendRequest("/enter_private_room",n,(function(n){0!==n.errcode?-1==n.errcode?setTimeout((function(){o.enterRoom(e,t)}),5e3):(s.vv().wc.hide(),t&&t(n)):(s.vv().wc.hide(),t&&t(n),console.log("*********** enter room "),s.vv().gameNetMgr.connectGameServer(n))}))},i.getHistoryList=function(e){var t={account:s.vv().userMgr.account,sign:s.vv().userMgr.sign};s.vv().http.sendRequest("/get_history_list",t,(function(t){0!==t.errcode?console.log(t.errmsg):(console.log(t.history),null!=e&&e(t.history))}))},i.getGamesOfRoom=function(e,t){var o={account:s.vv().userMgr.account,sign:s.vv().userMgr.sign,uuid:e};s.vv().http.sendRequest("/get_games_of_room",o,(function(e){0!==e.errcode?console.log(e.errmsg):(console.log(e.data),t(e.data))}))},i.getDetailOfGame=function(e,t,o){var n={account:s.vv().userMgr.account,sign:s.vv().userMgr.sign,uuid:e,index:t};s.vv().http.sendRequest("/get_detail_of_game",n,(function(e){0!==e.errcode?console.log(e.errmsg):(console.log(e.data),o(e.data))}))},t}(c)).prototype,"account",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"null"}}),f=t(p.prototype,"userId",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(p.prototype,"userName",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"null"}}),b=t(p.prototype,"lv",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=t(p.prototype,"exp",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=t(p.prototype,"coins",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=t(p.prototype,"gems",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=t(p.prototype,"sign",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=t(p.prototype,"salt",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=t(p.prototype,"ip",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=t(p.prototype,"sex",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(p.prototype,"roomData",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(p.prototype,"oldRoomId",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(p.prototype,"notice",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(p.prototype,"gemstip",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=p))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var n,e,o,i,c,a,s,r,l,u,p,v,h,d,f;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.EventHandler,c=t.Button,a=t.Slider,s=t.input,r=t.Input,l=t.macro,u=t.game,p=t.math,v=t.Vec3,h=t.UITransform,d=t.Component},function(t){f=t.AppGlobal}],execute:function(){var g;e._RF.push({},"b717fzww0hNzIqvNbb1t9wx","Utils",void 0);var w=o.ccclass;t("Utils",w("Utils")(g=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.addClickEvent=function(t,n,e,o){console.log(e+":"+o);var a=new i;a.target=n,a.component=e,a.handler=o,t.getComponent(c).clickEvents.push(a)},o.addSlideEvent=function(t,n,e,o){var c=new i;c.target=n,c.component=e,c.handler=o,t.getComponent(a).slideEvents.push(c)},o.addEscEvent=function(t){s.on(r.EventType.KEY_UP,(function(t){t.keyCode==l.KEY.back&&f.vv().alert.show("提示","确定要退出游戏吗？",(function(){u.end()}),!0)}),t)},o.setRotation=function(t,n){var e=t.rotation,o=p.quat(n.x||e.x,n.y||e.y,n.z||e.z,e.w);t.setRotation(o)},o.setLocation=function(t,n){var e=t.position,o=new v(n.x||e.x,n.y||e.y,n.z||e.z);t.setPosition(o)},o.setScale=function(t,n){var e=t.scale,o=new v(n.x||e.x,n.y||e.y,n.z||e.z);t.setScale(o)},o.setSize=function(t,n){var e=t.getComponent(h);e&&(n.width&&(e.width=n.width),n.height&&(e.height=n.height))},e}(d))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/Voice.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(e){var i,t,o,c,n,l,v,a,s,r;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,v=e.utils,a=e.Input,s=e.Component},function(e){r=e.AppGlobal}],execute:function(){var _,h,u;n._RF.push({},"f6db9z0CxdEzpRVgU569dDu","Voice",void 0);var T=l.ccclass,d=l.property;e("Voice",T("Voice")((u=i((h=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(i=e.call.apply(e,[this].concat(n))||this)._lastTouchTime=null,i._voice=null,i._volume=null,i._voice_failed=null,i._lastCheckTime=-1,i._timeBar=null,o(i,"MAX_TIME",u,c(i)),i}t(i,e);var n=i.prototype;return n.onLoad=function(){this._voice=v.find("voice",this.node),this._voice.active=!1,this._voice_failed=v.find("voice/voice_failed",this.node),this._voice_failed.active=!1,this._timeBar=v.find("voice/time",this.node),r.vv().utils.setScale(this._timeBar,{x:0}),this._volume=v.find("voice/volume",this.node);for(var e=1;e<this._volume.children.length;++e)this._volume.children[e].active=!1;(i=v.find("voice/voice_failed/btn_ok",this.node))&&r.vv().utils.addClickEvent(i,this.node,"Voice","onBtnOKClicked");var i,t=this;(i=v.find("btn_voice",this.node))&&(i.on(a.EventType.TOUCH_START,(function(){console.log("cc.Node.EventType.TOUCH_START"),r.vv().voiceMgr.prepare("record.amr"),t._lastTouchTime=Date.now(),t._voice.active=!0,t._voice_failed.active=!1})),i.on(a.EventType.TOUCH_MOVE,(function(){console.log("cc.Node.EventType.TOUCH_MOVE")})),i.on(a.EventType.TOUCH_END,(function(){console.log("cc.Node.EventType.TOUCH_END"),Date.now()-t._lastTouchTime<1e3?(t._voice_failed.active=!0,r.vv().voiceMgr.cancel()):t.onVoiceOK(),t._lastTouchTime=null})),i.on(a.EventType.TOUCH_CANCEL,(function(){console.log("cc.Node.EventType.TOUCH_CANCEL"),r.vv().voiceMgr.cancel(),t._lastTouchTime=null,t._voice.active=!1})))},n.onVoiceOK=function(){if(null!=this._lastTouchTime){r.vv().voiceMgr.release();var e=Date.now()-this._lastTouchTime,i=r.vv().voiceMgr.getVoiceData("record.amr");r.vv().net.send("voice_msg",{msg:i,time:e})}this._voice.active=!1},n.onBtnOKClicked=function(){this._voice.active=!1},n.update=function(e){if(1==this._voice.active&&0==this._voice_failed.active&&Date.now()-this._lastCheckTime>300){for(var i=0;i<this._volume.children.length;++i)this._volume.children[i].active=!1;var t=r.vv().voiceMgr.getVoiceLevel(7);t>=1&&t<=7&&(this._volume.children[t-1].active=!0),this._lastCheckTime=Date.now()}if(this._lastTouchTime){var o=Date.now()-this._lastTouchTime;if(o>=this.MAX_TIME)this.onVoiceOK(),this._lastTouchTime=null;else{var c=o/this.MAX_TIME;r.vv().utils.setScale(this._timeBar,{x:1-c})}}},i}(s)).prototype,"MAX_TIME",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15e3}}),_=h))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/VoiceMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,o,r,c,a;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,a=e.Component}],execute:function(){var l,u,f;r._RF.push({},"1f066RbLAxKGJZtkDFO2kq/","VoiceMgr",void 0);var p=c.ccclass,s=c.property;e("VoiceMgr",p("VoiceMgr")((f=n((u=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return n=e.call.apply(e,[this].concat(r))||this,i(n,"onPlayCallback",f,o(n)),n._voiceMediaPath="null",n}t(n,e);var r=n.prototype;return r.init=function(){},r.prepare=function(e){},r.release=function(){},r.cancel=function(){},r.writeVoice=function(e,n){},r.clearCache=function(e){},r.play=function(e){},r.stop=function(){},r.getVoiceLevel=function(e){return 100},r.getVoiceData=function(e){},r.download=function(){},r.setStorageDir=function(e){},n}(a)).prototype,"onPlayCallback",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"null"}}),l=u))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/WaitingConnection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppGlobal.ts"],(function(t){var n,i,o,e,r,a,s,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Component},function(t){l=t.AppGlobal}],execute:function(){var c,u,h,p;r._RF.push({},"10e32jDstpLhIGHWrQEq2vN","WaitingConnection",void 0);var f=a.ccclass,g=a.property;t("WaitingConnection",f("WaitingConnection")((h=n((u=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(n,"target",h,e(n)),n._isShow=!1,o(n,"lblContent",p,e(n)),n}i(n,t);var r=n.prototype;return r.onLoad=function(){console.log("******* waiting connection start!*"),l.vv().wc=this,this.node.active=this._isShow},r.update=function(t){var n=this.target.rotation,i=n.w;this.target.setRotation(n.x,n.y,n.z,i-45*t)},r.show=function(t){this._isShow=!0,this.node&&(this.node.active=this._isShow),this.lblContent&&(null==t&&(t=""),this.lblContent.string=t)},r.hide=function(){this._isShow=!1,this.node&&(this.node.active=this._isShow)},n}(s)).prototype,"target",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=n(u.prototype,"lblContent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});